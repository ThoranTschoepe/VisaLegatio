This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
app/
  globals.css
  layout.tsx
  page.tsx
components/
  Alert/
    AlertContainer.tsx
  Layout/
    DarkModeSwitcher/
      DarkModeSelect/
        DarkModeSelect.tsx
      DarkModeSwitcher.tsx
    Footer/
      Footer.tsx
    Navbar/
      Navbar.tsx
    Layout.tsx
  UI/
    Button.tsx
    Card.tsx
    index.tsx
    LoadingOverlay.tsx
    LoadingSpinner.tsx
    Stats.tsx
  ChatInterface.tsx
  DocumentUpload.tsx
  DynamicForm.tsx
  index.tsx
  LoadingStates.tsx
  Notification.tsx
  repomix-output.xml
  StatusTracker.tsx
lib/
  constants/
    theme.constants.ts
  stores/
    alert.store.ts
public/
  file.svg
  globe.svg
  next.svg
  vercel.svg
  window.svg
types/
  index.ts
utils/
  api.ts
  helpers.ts
.gitignore
eslint.config.mjs
next.config.ts
package.json
postcss.config.mjs
README.md
tailwind.config.js
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/globals.css">
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Typography improvements */
@layer components {
  h1 {
    @apply text-2xl font-bold mb-5;
  }

  h2 {
    @apply text-xl font-bold mb-3;
  }

  h3 {
    @apply text-lg font-bold mb-1;
  }

  /* Logo styling */
  .logo {
    @apply font-bold;
    font-family: 'JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', monospace;
  }

  /* Chat interface styles */
  .chat-message {
    @apply transition-all duration-300 ease-in-out;
  }

  .chat-message:hover {
    @apply transform scale-[1.02];
  }

  /* Status tracker styles */
  .status-step {
    @apply transition-all duration-500 ease-in-out;
  }

  .status-step.completed {
    @apply text-success;
  }

  .status-step.current {
    @apply text-primary animate-pulse;
  }

  /* Document upload styles */
  .document-upload-area {
    @apply border-2 border-dashed border-base-300 rounded-lg p-6 transition-all duration-300;
  }

  .document-upload-area:hover {
    @apply border-primary bg-primary/5;
  }

  .document-upload-area.dragging {
    @apply border-primary bg-primary/10;
  }

  /* Loading overlay */
  .loading-overlay {
    @apply absolute inset-0 bg-base-100/80 backdrop-blur-sm flex flex-col justify-center items-center z-50;
  }
}

/* Remove number input spinners */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Custom animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(20px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes visaPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.visa-fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

.visa-slide-up {
  animation: slideUp 0.5s ease-out;
}

.visa-pulse {
  animation: visaPulse 2s infinite;
}

/* Responsive improvements */
@media (max-width: 640px) {
  .container {
    @apply px-4;
  }
  
  h1 {
    @apply text-xl;
  }
  
  h2 {
    @apply text-lg;
  }
}

/* Enhanced focus styles for accessibility */
:focus-visible {
  @apply ring-2 ring-primary ring-offset-2 ring-offset-base-100;
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</file>

<file path="app/layout.tsx">
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import './globals.css'
import Script from 'next/script'

const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: 'VisaVerge - AI-Powered Visa Applications',
  description: 'The future of visa applications. Smart, transparent, and designed for the digital age.',
  keywords: ['visa', 'application', 'AI', 'embassy', 'travel', 'immigration'],
  authors: [{ name: 'VisaVerge Team' }],
  viewport: 'width=device-width, initial-scale=1',
  robots: 'index, follow',
  openGraph: {
    title: 'VisaVerge - AI-Powered Visa Applications',
    description: 'Experience the future of visa applications with AI guidance, real-time tracking, and smart forms.',
    type: 'website',
    siteName: 'VisaVerge',
  },
  twitter: {
    card: 'summary_large_image',
    title: 'VisaVerge - AI-Powered Visa Applications',
    description: 'Experience the future of visa applications with AI guidance, real-time tracking, and smart forms.',
  }
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        <link rel="icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
        {/* Theme initialization script - runs before hydration */}
        <Script id="theme-init" strategy="beforeInteractive">
          {`
            (function() {
              try {
                const theme = localStorage.getItem('theme');
                const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                
                let appliedTheme = 'cupcake'; // default light theme
                
                if (theme === 'dark') {
                  appliedTheme = 'dracula';
                } else if (theme === 'light') {
                  appliedTheme = 'cupcake';
                } else if (!theme || theme === 'default') {
                  appliedTheme = systemDark ? 'dracula' : 'cupcake';
                }
                
                document.documentElement.setAttribute('data-theme', appliedTheme);
                document.body.setAttribute('data-theme', appliedTheme);
              } catch (e) {
                // Fallback to light theme
                document.documentElement.setAttribute('data-theme', 'cupcake');
                document.body.setAttribute('data-theme', 'cupcake');
              }
            })();
          `}
        </Script>
      </head>
      <body className={`${inter.className} antialiased`} suppressHydrationWarning>
        <div className="min-h-screen bg-base-200">
          {children}
        </div>
      </body>
    </html>
  )
}
</file>

<file path="app/page.tsx">
'use client'

import { useState } from 'react'
import { Globe, Zap, Shield, Users, ArrowRight, Sparkles } from 'lucide-react'
import ChatInterface from '@/components/ChatInterface'
import DynamicForm from '@/components/DynamicForm'
import DocumentUpload from '@/components/DocumentUpload'
import StatusTracker from '@/components/StatusTracker'
import DarkModeSwitcher from '@/components/Layout/DarkModeSwitcher/DarkModeSwitcher'
import AlertContainer from '@/components/Alert/AlertContainer'
import { Card, Button, Stats, Stat, Badge } from '@/components/UI'
import { VisaType, Document } from '@/types'
import { api } from '@/utils/api'
import { useAlertStore } from '@/lib/stores/alert.store'

type AppStep = 'landing' | 'chat' | 'form' | 'documents' | 'status'

export default function HomePage() {
  const [currentStep, setCurrentStep] = useState<AppStep>('landing')
  const [selectedVisaType, setSelectedVisaType] = useState<VisaType | null>(null)
  const [formAnswers, setFormAnswers] = useState<Record<string, any>>({})
  const [documents, setDocuments] = useState<Document[]>([])
  const [applicationId, setApplicationId] = useState<string | null>(null)
  const { showSuccess, showError } = useAlertStore()

  const handleVisaTypeSelected = (visaType: VisaType) => {
    setSelectedVisaType(visaType)
    setCurrentStep('form')
    showSuccess(`Starting ${visaType} visa application!`)
  }

  const handleFormSubmit = (answers: Record<string, any>) => {
    setFormAnswers(answers)
    setCurrentStep('documents')
    showSuccess('Form completed! Please upload your documents.')
  }

  const handleDocumentsComplete = () => {
    // Simulate application submission
    submitApplication()
  }

  const submitApplication = async () => {
    try {
      showSuccess('Submitting your application...')
      const application = await api.submitApplication({
        visaType: selectedVisaType!,
        answers: formAnswers,
        documents
      })
      setApplicationId(application.id)
      setCurrentStep('status')
      showSuccess('Application submitted successfully!')
    } catch (error) {
      console.error('Error submitting application:', error)
      showError('Failed to submit application. Please try again.')
    }
  }

  const resetApplication = () => {
    setCurrentStep('landing')
    setSelectedVisaType(null)
    setFormAnswers({})
    setDocuments([])
    setApplicationId(null)
  }

  const startChatDirectly = () => {
    setCurrentStep('chat')
  }

  if (currentStep === 'chat') {
    return (
      <div className="min-h-screen bg-base-200">
        {/* Navbar */}
        <div className="navbar bg-base-100 shadow-lg">
          <div className="flex-1">
            <button 
              onClick={() => setCurrentStep('landing')}
              className="btn btn-ghost normal-case text-xl font-bold"
            >
              <Globe className="w-6 h-6 mr-2" />
              VisaVerge
            </button>
          </div>
          <div className="flex-none">
            <DarkModeSwitcher />
          </div>
        </div>

        <div className="container mx-auto px-4 py-8">
          <div className="max-w-4xl mx-auto">
            {/* Header */}
            <div className="text-center mb-8">
              <h1 className="text-4xl font-bold mb-4">Chat with AVA</h1>
              <p className="text-lg opacity-70">
                Your AI visa assistant is ready to help you find the right visa
              </p>
              <Badge variant="primary" className="mt-2">
                <Sparkles className="w-4 h-4 mr-1" />
                AI-Powered
              </Badge>
            </div>

            {/* Chat Interface */}
            <Card className="h-[600px]">
              <ChatInterface onVisaTypeSelected={handleVisaTypeSelected} />
            </Card>

            {/* Back button */}
            <div className="text-center mt-6">
              <Button 
                variant="ghost" 
                onClick={() => setCurrentStep('landing')}
                className="btn-sm"
              >
                ‚Üê Back to homepage
              </Button>
            </div>
          </div>
        </div>
        <AlertContainer />
      </div>
    )
  }

  if (currentStep === 'form' && selectedVisaType) {
    return (
      <div className="min-h-screen bg-base-200">
        {/* Navbar */}
        <div className="navbar bg-base-100 shadow-lg">
          <div className="flex-1">
            <span className="text-xl font-bold">
              <Globe className="w-6 h-6 mr-2 inline" />
              VisaVerge
            </span>
          </div>
          <div className="flex-none">
            <DarkModeSwitcher />
          </div>
        </div>
        
        <div className="container mx-auto px-4 py-8">
          <DynamicForm
            visaType={selectedVisaType}
            onSubmit={handleFormSubmit}
            onBack={() => setCurrentStep('chat')}
          />
        </div>
        <AlertContainer />
      </div>
    )
  }

  if (currentStep === 'documents' && selectedVisaType) {
    return (
      <div className="min-h-screen bg-base-200">
        {/* Navbar */}
        <div className="navbar bg-base-100 shadow-lg">
          <div className="flex-1">
            <span className="text-xl font-bold">
              <Globe className="w-6 h-6 mr-2 inline" />
              VisaVerge
            </span>
          </div>
          <div className="flex-none">
            <DarkModeSwitcher />
          </div>
        </div>
        
        <div className="container mx-auto px-4 py-8">
          <DocumentUpload
            visaType={selectedVisaType}
            onDocumentsChange={setDocuments}
            onComplete={handleDocumentsComplete}
          />
        </div>
        <AlertContainer />
      </div>
    )
  }

  if (currentStep === 'status' && applicationId) {
    return (
      <div className="min-h-screen bg-base-200">
        {/* Navbar */}
        <div className="navbar bg-base-100 shadow-lg">
          <div className="flex-1">
            <span className="text-xl font-bold">
              <Globe className="w-6 h-6 mr-2 inline" />
              VisaVerge
            </span>
          </div>
          <div className="flex-none">
            <DarkModeSwitcher />
          </div>
        </div>
        
        <div className="container mx-auto px-4 py-8">
          <StatusTracker
            applicationId={applicationId}
            onNewApplication={resetApplication}
          />
        </div>
        <AlertContainer />
      </div>
    )
  }

  // Landing page
  return (
    <div className="min-h-screen bg-base-200">
      {/* Navbar */}
      <div className="navbar bg-base-100 shadow-lg">
        <div className="flex-1">
          <span className="text-2xl font-bold">
            <Globe className="w-8 h-8 mr-2 inline text-primary" />
            VisaVerge
          </span>
        </div>
        <div className="flex-none">
          <DarkModeSwitcher />
        </div>
      </div>

      {/* Hero Section */}
      <div className="hero min-h-screen bg-gradient-to-br from-primary/10 via-secondary/5 to-accent/10">
        <div className="hero-content text-center">
          <div className="max-w-4xl">
            <div className="mb-8">
              <div className="flex items-center justify-center gap-3 mb-6">
                <Globe className="w-12 h-12 text-primary" />
                <h1 className="text-6xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                  VisaVerge
                </h1>
              </div>
              
              <p className="text-xl mb-8 opacity-80 max-w-3xl mx-auto leading-relaxed">
                The future of visa applications. Smart, transparent, and designed for the digital age.
              </p>

              <div className="flex flex-col sm:flex-row gap-4 justify-center">
                <Button
                  size="lg"
                  onClick={startChatDirectly}
                  className="btn-lg gradient-primary text-white border-none"
                >
                  <Sparkles className="w-5 h-5 mr-2" />
                  Start with AVA AI Assistant
                </Button>
                
                <Button variant="outline" size="lg">
                  Watch Demo
                  <ArrowRight className="w-5 h-5 ml-2" />
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="container mx-auto px-4 py-16">
        {/* Features Grid */}
        <div className="text-center mb-16">
          <h2 className="text-4xl font-bold mb-4">Why Choose VisaVerge?</h2>
          <p className="text-xl opacity-70">Experience the next generation of visa applications</p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
          <Card className="text-center hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-primary">
            <div className="flex justify-center mb-6">
              <div className="p-4 bg-primary/10 rounded-full">
                <Zap className="w-8 h-8 text-primary" />
              </div>
            </div>
            <h3 className="text-2xl font-bold mb-4">AI-Powered Guidance</h3>
            <p className="opacity-70 leading-relaxed">
              AVA, our AI assistant, guides you through the entire process, pre-screens your eligibility, and provides personalized recommendations.
            </p>
            <div className="mt-4">
              <Badge variant="primary">
                <Sparkles className="w-3 h-3 mr-1" />
                Smart AI
              </Badge>
            </div>
          </Card>

          <Card className="text-center hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-secondary">
            <div className="flex justify-center mb-6">
              <div className="p-4 bg-secondary/10 rounded-full">
                <Shield className="w-8 h-8 text-secondary" />
              </div>
            </div>
            <h3 className="text-2xl font-bold mb-4">Real-Time Transparency</h3>
            <p className="opacity-70 leading-relaxed">
              No more "application is being processed." See exactly where your application stands with live updates and approval probability.
            </p>
            <div className="mt-4">
              <Badge variant="secondary">Live Updates</Badge>
            </div>
          </Card>

          <Card className="text-center hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-accent">
            <div className="flex justify-center mb-6">
              <div className="p-4 bg-accent/10 rounded-full">
                <Users className="w-8 h-8 text-accent" />
              </div>
            </div>
            <h3 className="text-2xl font-bold mb-4">Smart Forms</h3>
            <p className="opacity-70 leading-relaxed">
              Dynamic forms that adapt to your answers, skip irrelevant questions, and auto-validate documents using advanced AI.
            </p>
            <div className="mt-4">
              <Badge variant="accent">Adaptive</Badge>
            </div>
          </Card>
        </div>

        {/* Stats Section */}
        <Card className="mb-16">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold mb-4">
              Revolutionizing Visa Applications
            </h2>
            <p className="text-lg opacity-70">
              See the difference VisaVerge makes
            </p>
          </div>

          <Stats className="w-full">
            <Stat 
              title="Faster Processing" 
              value="75%" 
              description="‚ÜóÔ∏é Compared to traditional methods"
              className="text-primary"
            />
            <Stat 
              title="User Satisfaction" 
              value="90%" 
              description="‚ÜóÔ∏é Customer approval rating"
              className="text-secondary"
            />
            <Stat 
              title="Fewer Errors" 
              value="50%" 
              description="‚ÜòÔ∏é Reduction in application mistakes"
              className="text-accent"
            />
            <Stat 
              title="AI Support" 
              value="24/7" 
              description="Always available assistance"
              className="text-success"
            />
          </Stats>
        </Card>

        {/* Demo Preview */}
        <Card className="mb-16">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold mb-4">
              Experience the Future Today
            </h2>
            <p className="text-lg opacity-70">
              Try our AI assistant and see how easy visa applications can be
            </p>
          </div>

          {/* Mini Chat Demo */}
          <div className="max-w-3xl mx-auto">
            <div className="h-96 border border-base-300 rounded-xl overflow-hidden">
              <ChatInterface onVisaTypeSelected={handleVisaTypeSelected} />
            </div>
          </div>
        </Card>

        {/* CTA Section */}
        <div className="text-center">
          <Card className="bg-gradient-to-r from-primary/10 to-secondary/10 border-primary">
            <h2 className="text-3xl font-bold mb-4">
              Ready to Transform Your Visa Experience?
            </h2>
            <p className="text-lg opacity-70 mb-8 max-w-2xl mx-auto">
              Join thousands of travelers who have already discovered a better way to apply for visas.
            </p>
            
            <Button
              size="lg"
              onClick={startChatDirectly}
              className="btn-lg gradient-primary text-white border-none"
            >
              Start Your Application Now
              <ArrowRight className="w-6 h-6 ml-2" />
            </Button>
          </Card>
        </div>
      </div>

      {/* Footer */}
      <footer className="footer footer-center p-10 bg-base-300 text-base-content">
        <div>
          <div className="flex items-center gap-2 text-2xl font-bold">
            <Globe className="w-8 h-8 text-primary" />
            VisaVerge
          </div>
          <p className="opacity-70 max-w-md">
            Reimagining embassy services for the digital age
          </p>
          <p className="text-sm opacity-50">
            Built with ‚ù§Ô∏è for the Embassy Innovation Hackathon
          </p>
        </div>
      </footer>

      <AlertContainer />
    </div>
  )
}
</file>

<file path="components/Alert/AlertContainer.tsx">
import React from 'react'
import { useAlertStore, AlertType } from '@/lib/stores/alert.store'

interface AlertItemProps {
  id: string
  type: AlertType
  message: string
  onRemove: (id: string) => void
}

const AlertItem: React.FC<AlertItemProps> = ({ id, type, message, onRemove }) => {
  const getAlertClasses = (type: AlertType) => {
    const baseClasses = "alert w-auto max-w-md shadow-lg transition-all duration-300"
    
    switch (type) {
      case 'success':
        return `${baseClasses} alert-success`
      case 'error':
        return `${baseClasses} alert-error`
      case 'warning':
        return `${baseClasses} alert-warning`
      case 'info':
      default:
        return `${baseClasses} alert-info`
    }
  }

  const getIcon = (type: AlertType) => {
    switch (type) {
      case 'success':
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )
      case 'error':
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )
      case 'warning':
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
          </svg>
        )
      case 'info':
      default:
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )
    }
  }

  return (
    <div className={getAlertClasses(type)}>
      {getIcon(type)}
      <span>{message}</span>
      <button 
        className="btn btn-sm btn-ghost btn-circle ml-2"
        onClick={() => onRemove(id)}
      >
        ‚úï
      </button>
    </div>
  )
}

const AlertContainer: React.FC = () => {
  const { alerts, removeAlert } = useAlertStore()

  if (alerts.length === 0) return null

  return (
    <div className="fixed bottom-4 right-4 pointer-events-none z-50">
      <div className="flex flex-col space-y-2">
        {alerts.map((alert, index) => (
          <div 
            key={alert.id}
            className="pointer-events-auto transform transition-all duration-300 ease-in-out"
            style={{ 
              zIndex: 1000 - index 
            }}
          >
            <AlertItem
              id={alert.id}
              type={alert.type}
              message={alert.message}
              onRemove={removeAlert}
            />
          </div>
        ))}
      </div>
    </div>
  )
}

export default AlertContainer
</file>

<file path="components/Layout/DarkModeSwitcher/DarkModeSelect/DarkModeSelect.tsx">
import React from "react"

interface DarkModeSelectProps {
	themeSwitch: Function
}

const DarkModeSelect = ({ themeSwitch }: DarkModeSelectProps) => {
	return (
		<ul tabIndex={0} className="menu menu-compact dropdown-content mt-3 p-2 shadow rounded-box w-52">
			<li>
				<span onClick={() => themeSwitch("default")}>System Default</span>
			</li>
			<li>
				<span onClick={() => themeSwitch("light")}>Light</span>
			</li>
			<li>
				<span onClick={() => themeSwitch("dark")}>Dark</span>
			</li>
		</ul>
	)
}

export default DarkModeSelect
</file>

<file path="components/Layout/DarkModeSwitcher/DarkModeSwitcher.tsx">
import React, { useEffect, useState } from "react"
import { THEMES } from "@/lib/constants/theme.constants"
import DarkModeSelect from "./DarkModeSelect/DarkModeSelect"

const DarkModeSwitcher = () => {
	const [showMoon, setShowMoon] = useState(true)
	const [isSystemDark, setIsSystemDark] = useState(
		typeof window !== "undefined" && window.matchMedia("screen and (prefers-color-scheme: dark)").matches
	)

	typeof window !== "undefined" &&
		window.matchMedia("screen and (prefers-color-scheme: dark)").addEventListener("change", (event) => {
			setIsSystemDark(window.matchMedia("screen and (prefers-color-scheme: dark)").matches)
		})

	useEffect(() => {
		const userTheme = localStorage.getItem("theme")

		if (userTheme === "dark") applyDark()
		if (userTheme === "light") applyLight()

		if (!userTheme || userTheme === "default") {
			if (isSystemDark) applyDark()
			else applyLight()
		}
	}, [isSystemDark])

	const applyDark = () => {
		document.body.setAttribute("data-theme", THEMES.DARK)
		setShowMoon(false)
	}

	const applyLight = () => {
		document.body.setAttribute("data-theme", THEMES.LIGHT)
		setShowMoon(true)
	}

	const themeSwitch = (theme: string) => {
		if (document.activeElement instanceof HTMLElement) {
			document.activeElement.blur()
		}
		localStorage.setItem("theme", theme)

		if (theme === "default") {
			if (isSystemDark) applyDark()
			else applyLight()
		}

		if (theme === "dark") applyDark()
		if (theme === "light") applyLight()
	}

	return (
		<div className="flex-none">
			<div tabIndex={0} className="dropdown dropdown-end">
				{showMoon ? (
					<button tabIndex={0} className="btn btn-ghost btn-circle">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							strokeWidth={2}
							stroke="currentColor"
							className="w-6 h-6">
							<path
								strokeLinecap="round"
								strokeLinejoin="round"
								d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
							/>
						</svg>
					</button>
				) : (
					<button tabIndex={0} className="btn btn-ghost btn-circle">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							strokeWidth={2}
							stroke="currentColor"
							className="w-6 h-6">
							<path
								strokeLinecap="round"
								strokeLinejoin="round"
								d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
							/>
						</svg>
					</button>
				)}
				<DarkModeSelect themeSwitch={themeSwitch} />
			</div>
		</div>
	)
}

export default DarkModeSwitcher
</file>

<file path="components/Layout/Footer/Footer.tsx">
import React from "react"

const Footer = () => {
	return (
		<footer className="footer flex flex-row flex-wrap justify-between p-5 opacity-50 gap-y-2 mb-2 md:mb-0">
			<div className="text-sm">
				¬© 2025 SKS Trainer. Sportk√ºstenschifferschein Pr√ºfungsvorbereitung.
			</div>
		</footer>
	)
}

export default Footer
</file>

<file path="components/Layout/Navbar/Navbar.tsx">
"use client"

import { useRouter, usePathname } from "next/navigation"
import React from "react"
import DarkModeSwitcher from "@/components/Layout/DarkModeSwitcher/DarkModeSwitcher"

const Navbar = () => {
  const router = useRouter()
  const pathname = usePathname()

  return (
    <div className="navbar">
      <div className="flex-1">
        {pathname === "/" ? (
          <button className="btn btn-ghost normal-case text-2xl logo" onClick={() => window.location.reload()}>
            ‚öì SKS Trainer
          </button>
        ) : (
          <button className="btn btn-ghost normal-case text-2xl logo" onClick={() => router.push("/")}>
            ‚öì SKS Trainer
          </button>
        )}
      </div>
      
      <div className="flex-none gap-2">
        <DarkModeSwitcher />
      </div>
    </div>
  )
}

export default Navbar
</file>

<file path="components/Layout/Layout.tsx">
import React, { ReactNode } from "react"
import AlertContainer from "@/components/Alert/AlertContainer"
import Footer from "./Footer/Footer"
import Navbar from "./Navbar/Navbar"

interface LayoutProps {
  children: ReactNode
}

const Layout = (props: LayoutProps) => {
  return (
    <div className="flex flex-col min-h-screen justify-between">
      <Navbar />
      <AlertContainer />
      <div className="container pt-14 pb-24">{props.children}</div>
      <Footer />
    </div>
  )
}

export default Layout
</file>

<file path="components/UI/Button.tsx">
import React from 'react'

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  loading?: boolean
  children: React.ReactNode
}

const Button: React.FC<ButtonProps> = ({ 
  variant = 'primary',
  size = 'md',
  loading = false,
  children,
  className = '',
  disabled,
  ...props
}) => {
  const baseClasses = 'btn'
  const variantClasses = {
    primary: 'btn-primary',
    secondary: 'btn-secondary',
    accent: 'btn-accent',
    ghost: 'btn-ghost',
    outline: 'btn-outline'
  }
  
  const sizeClasses = {
    xs: 'btn-xs',
    sm: 'btn-sm',
    md: '',
    lg: 'btn-lg'
  }

  const buttonClasses = [
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <button 
      className={buttonClasses}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="loading loading-spinner loading-sm mr-2"></span>}
      {children}
    </button>
  )
}

export default Button
</file>

<file path="components/UI/Card.tsx">
import React from 'react'

interface CardProps {
  children: React.ReactNode
  className?: string
  title?: string
}

const Card: React.FC<CardProps> = ({ children, className = '', title }) => {
  return (
    <div className={`card bg-base-200 shadow ${className}`}>
      <div className="card-body">
        {title && <h3 className="card-title">{title}</h3>}
        {children}
      </div>
    </div>
  )
}

export default Card
</file>

<file path="components/UI/index.tsx">
import React from 'react'

// Button Component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline' | 'success' | 'warning' | 'error'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  loading?: boolean
  children: React.ReactNode
}

export const Button: React.FC<ButtonProps> = ({ 
  variant = 'primary',
  size = 'md',
  loading = false,
  children,
  className = '',
  disabled,
  ...props
}) => {
  const baseClasses = 'btn'
  const variantClasses = {
    primary: 'btn-primary',
    secondary: 'btn-secondary',
    accent: 'btn-accent',
    ghost: 'btn-ghost',
    outline: 'btn-outline',
    success: 'btn-success',
    warning: 'btn-warning',
    error: 'btn-error'
  }
  
  const sizeClasses = {
    xs: 'btn-xs',
    sm: 'btn-sm',
    md: '',
    lg: 'btn-lg'
  }

  const buttonClasses = [
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <button 
      className={buttonClasses}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="loading loading-spinner loading-sm mr-2"></span>}
      {children}
    </button>
  )
}

// Card Component
interface CardProps {
  children: React.ReactNode
  className?: string
  title?: string
  compact?: boolean
  bordered?: boolean
}

export const Card: React.FC<CardProps> = ({ 
  children, 
  className = '', 
  title, 
  compact = false,
  bordered = false 
}) => {
  const cardClasses = [
    'card',
    'bg-base-100',
    'shadow-lg',
    bordered ? 'card-bordered' : '',
    compact ? 'card-compact' : '',
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={cardClasses}>
      <div className="card-body">
        {title && <h3 className="card-title">{title}</h3>}
        {children}
      </div>
    </div>
  )
}

// Loading Spinner Component
interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg'
  className?: string
}

export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'loading-sm',
    md: 'loading-md', 
    lg: 'loading-lg'
  }

  return (
    <div className={`flex justify-center items-center ${className}`}>
      <span className={`loading loading-spinner ${sizeClasses[size]}`}></span>
    </div>
  )
}

// Loading Overlay Component
interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
  children: React.ReactNode
}

export const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ 
  isLoading, 
  message = 'Loading...', 
  children 
}) => {
  return (
    <div className="relative">
      {children}
      {isLoading && (
        <div className="loading-overlay">
          <LoadingSpinner size="lg" />
          <p className="mt-4 text-lg">{message}</p>
        </div>
      )}
    </div>
  )
}

// Stats Components
interface StatProps {
  title: string
  value: string | number
  description?: string
  className?: string
}

export const Stat: React.FC<StatProps> = ({ title, value, description, className = '' }) => {
  return (
    <div className={`stat ${className}`}>
      <div className="stat-title">{title}</div>
      <div className="stat-value">{value}</div>
      {description && <div className="stat-desc">{description}</div>}
    </div>
  )
}

interface StatsProps {
  children: React.ReactNode
  className?: string
  vertical?: boolean
}

export const Stats: React.FC<StatsProps> = ({ children, className = '', vertical = false }) => {
  const statsClass = vertical 
    ? 'stats stats-vertical shadow bg-base-200' 
    : 'stats stats-vertical lg:stats-horizontal shadow bg-base-200'

  return (
    <div className={`${statsClass} ${className}`}>
      {children}
    </div>
  )
}

// Badge Component
interface BadgeProps {
  children: React.ReactNode
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'success' | 'warning' | 'error' | 'info'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  className?: string
}

export const Badge: React.FC<BadgeProps> = ({ 
  children, 
  variant = 'primary', 
  size = 'md',
  className = ''
}) => {
  const variantClasses = {
    primary: 'badge-primary',
    secondary: 'badge-secondary',
    accent: 'badge-accent',
    ghost: 'badge-ghost',
    success: 'badge-success',
    warning: 'badge-warning',
    error: 'badge-error',
    info: 'badge-info'
  }
  
  const sizeClasses = {
    xs: 'badge-xs',
    sm: 'badge-sm',
    md: '',
    lg: 'badge-lg'
  }

  const badgeClasses = [
    'badge',
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={badgeClasses}>
      {children}
    </div>
  )
}
</file>

<file path="components/UI/LoadingOverlay.tsx">
import React from 'react'
import LoadingSpinner from './LoadingSpinner'

interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
  children: React.ReactNode
}

const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ 
  isLoading, 
  message = 'Loading...', 
  children 
}) => {
  return (
    <div className="relative">
      {children}
      {isLoading && (
        <div className="absolute inset-0 bg-base-100/80 backdrop-blur-sm flex flex-col justify-center items-center z-50">
          <LoadingSpinner size="lg" />
          <p className="mt-4 text-lg">{message}</p>
        </div>
      )}
    </div>
  )
}

export default LoadingOverlay
</file>

<file path="components/UI/LoadingSpinner.tsx">
import React from 'react'

interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg'
  className?: string
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'loading-sm',
    md: 'loading-md', 
    lg: 'loading-lg'
  }

  return (
    <div className={`flex justify-center items-center ${className}`}>
      <span className={`loading loading-spinner ${sizeClasses[size]}`}></span>
    </div>
  )
}

export default LoadingSpinner
</file>

<file path="components/UI/Stats.tsx">
import React from 'react'

interface StatProps {
  title: string
  value: string | number
  description?: string
  className?: string
}

const Stat: React.FC<StatProps> = ({ title, value, description, className = '' }) => {
  return (
    <div className={`stat ${className}`}>
      <div className="stat-title">{title}</div>
      <div className="stat-value">{value}</div>
      {description && <div className="stat-desc">{description}</div>}
    </div>
  )
}

interface StatsProps {
  children: React.ReactNode
  className?: string
  vertical?: boolean
}

const Stats: React.FC<StatsProps> = ({ children, className = '', vertical = false }) => {
  const statsClass = vertical 
    ? 'stats stats-vertical shadow bg-base-200' 
    : 'stats stats-vertical lg:stats-horizontal shadow bg-base-200'

  return (
    <div className={`${statsClass} ${className}`}>
      {children}
    </div>
  )
}

export { Stats, Stat }
</file>

<file path="components/ChatInterface.tsx">
'use client'

import { useState, useRef, useEffect } from 'react'
import { Send, Bot, User, Sparkles } from 'lucide-react'
import { Message, VisaType } from '@/types'
import { api } from '@/utils/api'
import { Button, Badge } from '@/components/UI'

interface ChatInterfaceProps {
  onVisaTypeSelected?: (visaType: VisaType) => void
}

export default function ChatInterface({ onVisaTypeSelected }: ChatInterfaceProps) {
  const [messages, setMessages] = useState<Message[]>([
    {
      id: '1',
      text: "Hi! I'm AVA, your AI visa assistant. I can help you find the right visa and guide you through the application process. What type of travel are you planning? üõÇ‚úàÔ∏è",
      sender: 'ava',
      timestamp: new Date()
    }
  ])
  const [input, setInput] = useState('')
  const [isLoading, setIsLoading] = useState(false)
  const messagesEndRef = useRef<HTMLDivElement>(null)

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
  }

  useEffect(() => {
    scrollToBottom()
  }, [messages])

  const sendMessage = async () => {
    if (!input.trim() || isLoading) return

    const userMessage: Message = {
      id: Date.now().toString(),
      text: input.trim(),
      sender: 'user',
      timestamp: new Date()
    }

    setMessages(prev => [...prev, userMessage])
    setInput('')
    setIsLoading(true)

    try {
      const response = await api.chat(input.trim())
      
      const avaMessage: Message = {
        id: (Date.now() + 1).toString(),
        text: response.response,
        sender: 'ava',
        timestamp: new Date(),
        metadata: {
          suggestedVisaType: response.suggestedVisaType,
          nextAction: response.nextAction,
          confidence: response.confidence
        }
      }

      setMessages(prev => [...prev, avaMessage])

      // If AVA suggests starting a form, trigger the callback
      if (response.nextAction === 'start_form' && response.suggestedVisaType && onVisaTypeSelected) {
        setTimeout(() => {
          onVisaTypeSelected(response.suggestedVisaType!)
        }, 1000)
      }
    } catch (error) {
      console.error('Error sending message:', error)
      const errorMessage: Message = {
        id: (Date.now() + 1).toString(),
        text: "I'm sorry, I'm having trouble connecting right now. Please try again in a moment.",
        sender: 'ava',
        timestamp: new Date()
      }
      setMessages(prev => [...prev, errorMessage])
    } finally {
      setIsLoading(false)
    }
  }

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault()
      sendMessage()
    }
  }

  const quickReplies = [
    "I need a tourist visa",
    "Business visa application", 
    "Student visa help",
    "Family visit visa"
  ]

  return (
    <div className="flex flex-col h-full bg-base-100 rounded-lg shadow-lg overflow-hidden border border-base-300">
      {/* Header */}
      <div className="bg-gradient-to-r from-primary to-secondary text-white p-4">
        <div className="flex items-center gap-3">
          <div className="relative">
            <div className="avatar">
              <div className="w-10 rounded-full bg-base-100">
                <Bot className="w-6 h-6 text-primary m-2" />
              </div>
            </div>
            <div className="absolute -top-1 -right-1 w-3 h-3 bg-success rounded-full animate-pulse" />
          </div>
          <div>
            <h3 className="font-semibold text-lg flex items-center gap-2">
              AVA - AI Visa Assistant
              <Badge variant="ghost" className="text-xs bg-white/20 text-white border-white/30">
                <Sparkles className="w-3 h-3 mr-1" />
                AI
              </Badge>
            </h3>
            <p className="text-primary-content/70 text-sm">Online ‚Ä¢ Ready to help</p>
          </div>
        </div>
      </div>

      {/* Messages */}
      <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-base-50">
        {messages.map(message => (
          <div
            key={message.id}
            className={`chat ${message.sender === 'user' ? 'chat-end' : 'chat-start'} chat-message`}
          >
            <div className="chat-image avatar">
              <div className="w-8 rounded-full">
                {message.sender === 'ava' ? (
                  <div className="bg-primary text-white rounded-full flex items-center justify-center w-8 h-8">
                    <Bot className="w-5 h-5" />
                  </div>
                ) : (
                  <div className="bg-neutral text-white rounded-full flex items-center justify-center w-8 h-8">
                    <User className="w-5 h-5" />
                  </div>
                )}
              </div>
            </div>
            
            <div className={`chat-bubble ${
              message.sender === 'user' 
                ? 'chat-bubble-primary' 
                : 'chat-bubble-secondary'
            }`}>
              <p className="whitespace-pre-wrap leading-relaxed">{message.text}</p>
              
              {/* Show confidence for AVA messages */}
              {message.sender === 'ava' && message.metadata?.confidence && (
                <div className="mt-2 pt-2 border-t border-white/20">
                  <Badge variant="ghost" size="xs" className="bg-white/20 text-white border-white/30">
                    <Sparkles className="w-3 h-3 mr-1" />
                    {Math.round(message.metadata.confidence * 100)}% confident
                  </Badge>
                </div>
              )}
            </div>
            
            <div className="chat-footer opacity-50 text-xs">
              {message.timestamp.toLocaleTimeString()}
            </div>
          </div>
        ))}

        {/* Loading indicator */}
        {isLoading && (
          <div className="chat chat-start">
            <div className="chat-image avatar">
              <div className="w-8 rounded-full">
                <div className="bg-primary text-white rounded-full flex items-center justify-center w-8 h-8">
                  <Bot className="w-5 h-5" />
                </div>
              </div>
            </div>
            <div className="chat-bubble chat-bubble-secondary">
              <div className="flex gap-1">
                <div className="w-2 h-2 bg-current rounded-full animate-bounce" />
                <div 
                  className="w-2 h-2 bg-current rounded-full animate-bounce" 
                  style={{ animationDelay: '0.1s' }} 
                />
                <div 
                  className="w-2 h-2 bg-current rounded-full animate-bounce" 
                  style={{ animationDelay: '0.2s' }} 
                />
              </div>
            </div>
          </div>
        )}
        
        <div ref={messagesEndRef} />
      </div>

      {/* Quick Replies */}
      {messages.length === 1 && (
        <div className="px-4 py-3 bg-base-200 border-t border-base-300">
          <p className="text-xs opacity-60 mb-2">Quick options:</p>
          <div className="flex flex-wrap gap-2">
            {quickReplies.map((reply, index) => (
              <Button
                key={index}
                variant="ghost"
                size="xs"
                onClick={() => {
                  setInput(reply)
                  setTimeout(sendMessage, 100)
                }}
                className="text-xs"
              >
                {reply}
              </Button>
            ))}
          </div>
        </div>
      )}

      {/* Input Area */}
      <div className="p-4 bg-base-100 border-t border-base-300">
        <div className="flex gap-2">
          <div className="flex-1">
            <textarea
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Ask AVA anything about visas..."
              className="textarea textarea-bordered w-full resize-none"
              rows={1}
              disabled={isLoading}
            />
          </div>
          <Button
            onClick={sendMessage}
            disabled={!input.trim() || isLoading}
            loading={isLoading}
            className="btn-circle"
          >
            <Send className="w-4 h-4" />
          </Button>
        </div>
        <p className="text-xs opacity-50 mt-2 text-center">
          AVA can make mistakes. Please verify important information.
        </p>
      </div>
    </div>
  )
}
</file>

<file path="components/DocumentUpload.tsx">
'use client'

import { useState, useRef, useCallback } from 'react'
import { Upload, FileText, CheckCircle2, AlertCircle, X, Camera, Trash2 } from 'lucide-react'
import { Document, DocumentType, VisaType } from '@/types'

interface DocumentUploadProps {
  visaType: VisaType
  onDocumentsChange?: (documents: Document[]) => void
  onComplete?: () => void
}

const REQUIRED_DOCUMENTS: Record<VisaType, DocumentType[]> = {
  tourist: ['passport', 'photo', 'bank_statement', 'travel_insurance'],
  business: ['passport', 'photo', 'invitation_letter', 'employment_letter'],
  student: ['passport', 'photo', 'bank_statement', 'invitation_letter'],
  work: ['passport', 'photo', 'employment_letter', 'invitation_letter'],
  family_visit: ['passport', 'photo', 'invitation_letter', 'bank_statement'],
  transit: ['passport', 'photo', 'flight_itinerary']
}

const DOCUMENT_NAMES: Record<DocumentType, string> = {
  passport: 'Passport (Photo Page)',
  photo: 'Passport Photo',
  bank_statement: 'Bank Statement',
  invitation_letter: 'Invitation Letter',
  travel_insurance: 'Travel Insurance',
  employment_letter: 'Employment Letter',
  flight_itinerary: 'Flight Itinerary'
}

const DOCUMENT_DESCRIPTIONS: Record<DocumentType, string> = {
  passport: 'Clear photo of your passport information page',
  photo: 'Recent passport-sized photo (white background)',
  bank_statement: 'Last 3 months bank statements showing sufficient funds',
  invitation_letter: 'Official invitation letter from host organization',
  travel_insurance: 'Valid travel insurance covering your entire stay',
  employment_letter: 'Letter from employer confirming your employment',
  flight_itinerary: 'Flight booking confirmation or itinerary'
}

export default function DocumentUpload({ visaType, onDocumentsChange, onComplete }: DocumentUploadProps) {
  const [documents, setDocuments] = useState<Document[]>([])
  const [uploadingDocs, setUploadingDocs] = useState<Set<string>>(new Set())
  const [draggedOver, setDraggedOver] = useState<string | null>(null)
  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({})

  const requiredDocs = REQUIRED_DOCUMENTS[visaType] || []

  // Simulate document verification
  const verifyDocument = async (file: File, docType: DocumentType): Promise<boolean> => {
    // Simulate upload and verification time
    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 2000))
    
    // Simulate verification results (90% success rate)
    return Math.random() > 0.1
  }

  const handleFileUpload = useCallback(async (file: File, docType: DocumentType) => {
    const docId = `${docType}_${Date.now()}`
    
    setUploadingDocs(prev => new Set([...prev, docId]))

    try {
      const verified = await verifyDocument(file, docType)
      
      const newDocument: Document = {
        id: docId,
        name: file.name,
        type: docType,
        size: file.size,
        uploadedAt: new Date(),
        verified,
        url: URL.createObjectURL(file) // For preview
      }

      setDocuments(prev => {
        // Remove any existing document of the same type
        const filtered = prev.filter(doc => doc.type !== docType)
        const updated = [...filtered, newDocument]
        onDocumentsChange?.(updated)
        return updated
      })
    } catch (error) {
      console.error('Error uploading document:', error)
    } finally {
      setUploadingDocs(prev => {
        const newSet = new Set(prev)
        newSet.delete(docId)
        return newSet
      })
    }
  }, [onDocumentsChange])

  const handleDrop = useCallback((e: React.DragEvent, docType: DocumentType) => {
    e.preventDefault()
    setDraggedOver(null)
    
    const files = Array.from(e.dataTransfer.files)
    if (files.length > 0) {
      handleFileUpload(files[0], docType)
    }
  }, [handleFileUpload])

  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>, docType: DocumentType) => {
    const files = e.target.files
    if (files && files.length > 0) {
      handleFileUpload(files[0], docType)
    }
  }

  const removeDocument = (docType: DocumentType) => {
    setDocuments(prev => {
      const updated = prev.filter(doc => doc.type !== docType)
      onDocumentsChange?.(updated)
      return updated
    })
  }

  const getDocumentForType = (docType: DocumentType) => {
    return documents.find(doc => doc.type === docType)
  }

  const isUploading = (docType: DocumentType) => {
    return Array.from(uploadingDocs).some(id => id.startsWith(docType))
  }

  const formatFileSize = (bytes: number) => {
    if (bytes === 0) return '0 Bytes'
    const k = 1024
    const sizes = ['Bytes', 'KB', 'MB', 'GB']
    const i = Math.floor(Math.log(bytes) / Math.log(k))
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]
  }

  const allRequiredUploaded = requiredDocs.every(docType => 
    getDocumentForType(docType)?.verified
  )

  const uploadProgress = (documents.filter(doc => doc.verified).length / requiredDocs.length) * 100

  return (
    <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
      {/* Header */}
      <div className="bg-gradient-to-r from-green-600 to-blue-600 text-white p-6">
        <h2 className="text-xl font-bold mb-2">Upload Required Documents</h2>
        <p className="text-green-100 text-sm">
          Please upload the following documents for your {visaType} visa application
        </p>
        
        {/* Progress */}
        <div className="mt-4">
          <div className="flex justify-between text-sm text-green-100 mb-2">
            <span>Upload Progress</span>
            <span>{Math.round(uploadProgress)}% complete</span>
          </div>
          <div className="w-full bg-green-500 bg-opacity-30 rounded-full h-2">
            <div 
              className="bg-white h-2 rounded-full transition-all duration-500"
              style={{ width: `${uploadProgress}%` }}
            />
          </div>
        </div>
      </div>

      <div className="p-6">
        {/* Document grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {requiredDocs.map(docType => {
            const document = getDocumentForType(docType)
            const uploading = isUploading(docType)
            
            return (
              <div
                key={docType}
                className={`border-2 border-dashed rounded-lg p-6 transition-all ${
                  draggedOver === docType
                    ? 'border-blue-500 bg-blue-50'
                    : document?.verified
                    ? 'border-green-500 bg-green-50'
                    : document && !document.verified
                    ? 'border-red-500 bg-red-50'
                    : 'border-gray-300 hover:border-blue-400'
                }`}
                onDragOver={(e) => {
                  e.preventDefault()
                  setDraggedOver(docType)
                }}
                onDragLeave={() => setDraggedOver(null)}
                onDrop={(e) => handleDrop(e, docType)}
              >
                <input
                  ref={el => fileInputRefs.current[docType] = el}
                  type="file"
                  accept="image/*,.pdf"
                  onChange={(e) => handleFileInput(e, docType)}
                  className="hidden"
                />

                <div className="text-center">
                  {uploading ? (
                    <div className="space-y-3">
                      <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>
                      <p className="text-blue-600 font-medium">Uploading & Verifying...</p>
                      <p className="text-sm text-gray-600">Please wait while we process your document</p>
                    </div>
                  ) : document ? (
                    <div className="space-y-3">
                      <div className="flex items-center justify-center">
                        {document.verified ? (
                          <CheckCircle2 className="w-12 h-12 text-green-500" />
                        ) : (
                          <AlertCircle className="w-12 h-12 text-red-500" />
                        )}
                      </div>
                      
                      <div>
                        <p className="font-medium text-gray-800">{document.name}</p>
                        <p className="text-sm text-gray-600">{formatFileSize(document.size)}</p>
                        <p className={`text-sm font-medium ${
                          document.verified ? 'text-green-600' : 'text-red-600'
                        }`}>
                          {document.verified ? 'Verified ‚úì' : 'Verification Failed ‚úó'}
                        </p>
                      </div>

                      <div className="flex gap-2 justify-center">
                        <button
                          onClick={() => fileInputRefs.current[docType]?.click()}
                          className="px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600"
                        >
                          Replace
                        </button>
                        <button
                          onClick={() => removeDocument(docType)}
                          className="px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600"
                        >
                          <Trash2 className="w-4 h-4" />
                        </button>
                      </div>
                    </div>
                  ) : (
                    <div className="space-y-3">
                      <Upload className="w-12 h-12 text-gray-400 mx-auto" />
                      <div>
                        <h3 className="font-medium text-gray-800 mb-1">
                          {DOCUMENT_NAMES[docType]}
                        </h3>
                        <p className="text-sm text-gray-600 mb-3">
                          {DOCUMENT_DESCRIPTIONS[docType]}
                        </p>
                      </div>
                      
                      <div className="space-y-2">
                        <button
                          onClick={() => fileInputRefs.current[docType]?.click()}
                          className="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                        >
                          <FileText className="w-4 h-4 inline mr-2" />
                          Choose File
                        </button>
                        
                        <button
                          onClick={() => fileInputRefs.current[docType]?.click()}
                          className="w-full px-4 py-2 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-50 transition-colors"
                        >
                          <Camera className="w-4 h-4 inline mr-2" />
                          Take Photo
                        </button>
                      </div>
                      
                      <p className="text-xs text-gray-500">
                        Drag & drop or click to upload<br />
                        Supports: JPG, PNG, PDF (max 10MB)
                      </p>
                    </div>
                  )}
                </div>
              </div>
            )
          })}
        </div>

        {/* Tips */}
        <div className="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h4 className="font-medium text-blue-900 mb-2">üìù Document Tips</h4>
          <ul className="text-sm text-blue-800 space-y-1">
            <li>‚Ä¢ Ensure documents are clear and all text is readable</li>
            <li>‚Ä¢ Photos should be in color with good lighting</li>
            <li>‚Ä¢ Bank statements must be recent (within 3 months)</li>
            <li>‚Ä¢ All documents should be in high resolution</li>
            <li>‚Ä¢ Upload official documents only - no screenshots</li>
          </ul>
        </div>

        {/* Complete button */}
        {allRequiredUploaded && (
          <div className="mt-6 text-center">
            <button
              onClick={onComplete}
              className="px-8 py-3 bg-green-500 text-white text-lg font-medium rounded-lg hover:bg-green-600 transition-colors"
            >
              <CheckCircle2 className="w-5 h-5 inline mr-2" />
              All Documents Verified - Continue
            </button>
          </div>
        )}

        {/* Status summary */}
        <div className="mt-6 bg-gray-50 rounded-lg p-4">
          <h4 className="font-medium text-gray-800 mb-3">Upload Status</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
            {requiredDocs.map(docType => {
              const document = getDocumentForType(docType)
              const uploading = isUploading(docType)
              
              return (
                <div key={docType} className="flex items-center justify-between py-2">
                  <span className="text-sm text-gray-700">{DOCUMENT_NAMES[docType]}</span>
                  <div className="flex items-center gap-2">
                    {uploading ? (
                      <>
                        <div className="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                        <span className="text-xs text-blue-600">Processing...</span>
                      </>
                    ) : document?.verified ? (
                      <>
                        <CheckCircle2 className="w-4 h-4 text-green-500" />
                        <span className="text-xs text-green-600">Verified</span>
                      </>
                    ) : document ? (
                      <>
                        <AlertCircle className="w-4 h-4 text-red-500" />
                        <span className="text-xs text-red-600">Failed</span>
                      </>
                    ) : (
                      <>
                        <div className="w-4 h-4 border-2 border-gray-300 rounded-full"></div>
                        <span className="text-xs text-gray-500">Pending</span>
                      </>
                    )}
                  </div>
                </div>
              )
            })}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="components/DynamicForm.tsx">
'use client'

import { useState, useEffect } from 'react'
import { ChevronLeft, ChevronRight, Save, Send, AlertCircle, CheckCircle2 } from 'lucide-react'
import { Question, VisaType } from '@/types'
import { api } from '@/utils/api'

interface DynamicFormProps {
  visaType: VisaType
  onSubmit?: (answers: Record<string, any>) => void
  onBack?: () => void
}

export default function DynamicForm({ visaType, onSubmit, onBack }: DynamicFormProps) {
  const [questions, setQuestions] = useState<Question[]>([])
  const [answers, setAnswers] = useState<Record<string, any>>({})
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)
  const [errors, setErrors] = useState<Record<string, string>>({})
  const [isLoading, setIsLoading] = useState(true)
  const [isSaving, setIsSaving] = useState(false)

  // Load questions when visa type changes
  useEffect(() => {
    loadQuestions()
  }, [visaType])

  // Auto-save answers
  useEffect(() => {
    if (Object.keys(answers).length > 0) {
      autoSave()
    }
  }, [answers])

  const loadQuestions = async () => {
    setIsLoading(true)
    try {
      const loadedQuestions = await api.getFormQuestions(visaType, answers)
      setQuestions(loadedQuestions)
    } catch (error) {
      console.error('Error loading questions:', error)
    } finally {
      setIsLoading(false)
    }
  }

  const autoSave = async () => {
    setIsSaving(true)
    // Simulate auto-save
    setTimeout(() => setIsSaving(false), 500)
  }

  const validateAnswer = (question: Question, value: any): string | null => {
    if (question.required && (!value || value.toString().trim() === '')) {
      return 'This field is required'
    }

    if (question.validation) {
      if (question.type === 'number') {
        const numValue = parseFloat(value)
        if (question.validation.min && numValue < question.validation.min) {
          return question.validation.message || `Minimum value is ${question.validation.min}`
        }
        if (question.validation.max && numValue > question.validation.max) {
          return question.validation.message || `Maximum value is ${question.validation.max}`
        }
      }

      if (question.validation.pattern) {
        const regex = new RegExp(question.validation.pattern)
        if (!regex.test(value.toString())) {
          return question.validation.message || 'Invalid format'
        }
      }
    }

    return null
  }

  const handleAnswer = (questionId: string, value: any) => {
    const question = questions.find(q => q.id === questionId)
    if (!question) return

    // Validate the answer
    const error = validateAnswer(question, value)
    
    setErrors(prev => ({
      ...prev,
      [questionId]: error || ''
    }))

    setAnswers(prev => ({
      ...prev,
      [questionId]: value
    }))
  }

  const currentQuestion = questions[currentQuestionIndex]
  const progress = questions.length > 0 ? ((currentQuestionIndex + 1) / questions.length) * 100 : 0
  const canProceed = currentQuestion && answers[currentQuestion.id] && !errors[currentQuestion.id]
  const isLastQuestion = currentQuestionIndex === questions.length - 1

  const goToNext = () => {
    if (canProceed && !isLastQuestion) {
      setCurrentQuestionIndex(prev => prev + 1)
    }
  }

  const goToPrevious = () => {
    if (currentQuestionIndex > 0) {
      setCurrentQuestionIndex(prev => prev - 1)
    }
  }

  const handleSubmit = () => {
    if (onSubmit) {
      onSubmit(answers)
    }
  }

  const getVisaTypeTitle = (type: VisaType): string => {
    const titles = {
      tourist: 'Tourist Visa Application',
      business: 'Business Visa Application',
      student: 'Student Visa Application',
      work: 'Work Visa Application',
      family_visit: 'Family Visit Visa Application',
      transit: 'Transit Visa Application'
    }
    return titles[type] || 'Visa Application'
  }

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading your personalized form...</p>
        </div>
      </div>
    )
  }

  if (!currentQuestion) {
    return (
      <div className="text-center p-8">
        <AlertCircle className="w-12 h-12 text-yellow-500 mx-auto mb-4" />
        <h3 className="text-lg font-semibold text-gray-800 mb-2">No questions available</h3>
        <p className="text-gray-600">Please try again or contact support.</p>
      </div>
    )
  }

  return (
    <div className="max-w-2xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
      {/* Header */}
      <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
        <div className="flex items-center justify-between">
          <div>
            <h2 className="text-xl font-bold">{getVisaTypeTitle(visaType)}</h2>
            <p className="text-blue-100 text-sm mt-1">
              Question {currentQuestionIndex + 1} of {questions.length}
            </p>
          </div>
          <div className="flex items-center gap-2 text-sm">
            {isSaving && (
              <>
                <Save className="w-4 h-4 animate-pulse" />
                <span>Saving...</span>
              </>
            )}
          </div>
        </div>

        {/* Progress bar */}
        <div className="mt-4">
          <div className="flex justify-between text-sm text-blue-100 mb-2">
            <span>Progress</span>
            <span>{Math.round(progress)}% complete</span>
          </div>
          <div className="w-full bg-blue-500 bg-opacity-30 rounded-full h-2">
            <div 
              className="bg-white h-2 rounded-full transition-all duration-500 ease-out"
              style={{ width: `${progress}%` }}
            />
          </div>
        </div>
      </div>

      {/* Question content */}
      <div className="p-6">
        <div className="mb-6">
          <h3 className="text-lg font-semibold text-gray-800 mb-4">
            {currentQuestion.text}
          </h3>

          {/* Answer input based on question type */}
          <div className="space-y-4">
            {currentQuestion.type === 'text' && (
              <div>
                <input
                  type="text"
                  value={answers[currentQuestion.id] || ''}
                  onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                    errors[currentQuestion.id] ? 'border-red-500' : 'border-gray-300'
                  }`}
                  placeholder="Enter your answer..."
                />
                {errors[currentQuestion.id] && (
                  <p className="text-red-500 text-sm mt-2 flex items-center gap-2">
                    <AlertCircle className="w-4 h-4" />
                    {errors[currentQuestion.id]}
                  </p>
                )}
              </div>
            )}

            {currentQuestion.type === 'select' && (
              <div className="grid gap-3">
                {currentQuestion.options?.map(option => (
                  <button
                    key={option}
                    onClick={() => handleAnswer(currentQuestion.id, option)}
                    className={`p-4 text-left border rounded-lg transition-all ${
                      answers[currentQuestion.id] === option
                        ? 'border-blue-500 bg-blue-50 text-blue-700'
                        : 'border-gray-300 hover:border-blue-300 hover:bg-blue-50'
                    }`}
                  >
                    <div className="flex items-center justify-between">
                      <span>{option}</span>
                      {answers[currentQuestion.id] === option && (
                        <CheckCircle2 className="w-5 h-5 text-blue-500" />
                      )}
                    </div>
                  </button>
                ))}
              </div>
            )}

            {currentQuestion.type === 'number' && (
              <div>
                <input
                  type="number"
                  value={answers[currentQuestion.id] || ''}
                  onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                  min={currentQuestion.validation?.min}
                  max={currentQuestion.validation?.max}
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                    errors[currentQuestion.id] ? 'border-red-500' : 'border-gray-300'
                  }`}
                  placeholder="Enter number..."
                />
                {currentQuestion.validation && (
                  <p className="text-gray-500 text-sm mt-2">
                    {currentQuestion.validation.min && currentQuestion.validation.max
                      ? `Enter a number between ${currentQuestion.validation.min} and ${currentQuestion.validation.max}`
                      : currentQuestion.validation.min
                      ? `Minimum: ${currentQuestion.validation.min}`
                      : currentQuestion.validation.max
                      ? `Maximum: ${currentQuestion.validation.max}`
                      : ''
                    }
                  </p>
                )}
                {errors[currentQuestion.id] && (
                  <p className="text-red-500 text-sm mt-2 flex items-center gap-2">
                    <AlertCircle className="w-4 h-4" />
                    {errors[currentQuestion.id]}
                  </p>
                )}
              </div>
            )}

            {currentQuestion.type === 'date' && (
              <div>
                <input
                  type="date"
                  value={answers[currentQuestion.id] || ''}
                  onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                    errors[currentQuestion.id] ? 'border-red-500' : 'border-gray-300'
                  }`}
                />
                {errors[currentQuestion.id] && (
                  <p className="text-red-500 text-sm mt-2 flex items-center gap-2">
                    <AlertCircle className="w-4 h-4" />
                    {errors[currentQuestion.id]}
                  </p>
                )}
              </div>
            )}
          </div>
        </div>

        {/* Navigation */}
        <div className="flex justify-between items-center pt-6 border-t">
          <button
            onClick={onBack || goToPrevious}
            className="flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"
            disabled={currentQuestionIndex === 0 && !onBack}
          >
            <ChevronLeft className="w-4 h-4" />
            {currentQuestionIndex === 0 && onBack ? 'Back to Chat' : 'Previous'}
          </button>

          <div className="flex gap-3">
            {!isLastQuestion ? (
              <button
                onClick={goToNext}
                disabled={!canProceed}
                className="flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              >
                Next
                <ChevronRight className="w-4 h-4" />
              </button>
            ) : (
              <button
                onClick={handleSubmit}
                disabled={!canProceed}
                className="flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              >
                <Send className="w-4 h-4" />
                Submit Application
              </button>
            )}
          </div>
        </div>
      </div>

      {/* Form summary sidebar (for larger screens) */}
      <div className="hidden lg:block fixed right-4 top-24 w-64 bg-white rounded-lg shadow-lg p-4 max-h-96 overflow-y-auto">
        <h4 className="font-semibold text-gray-800 mb-3">Your Answers</h4>
        <div className="space-y-2">
          {questions.slice(0, currentQuestionIndex + 1).map((q, index) => (
            <div key={q.id} className="text-sm">
              <p className="text-gray-600 font-medium">{q.text}</p>
              <p className="text-gray-800">{answers[q.id] || 'Not answered'}</p>
              {index < currentQuestionIndex && (
                <div className="w-full h-px bg-gray-200 my-2" />
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="components/index.tsx">
import React from 'react'

// Button Component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline' | 'success' | 'warning' | 'error'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  loading?: boolean
  children: React.ReactNode
}

export const Button: React.FC<ButtonProps> = ({ 
  variant = 'primary',
  size = 'md',
  loading = false,
  children,
  className = '',
  disabled,
  ...props
}) => {
  const baseClasses = 'btn'
  const variantClasses = {
    primary: 'btn-primary',
    secondary: 'btn-secondary',
    accent: 'btn-accent',
    ghost: 'btn-ghost',
    outline: 'btn-outline',
    success: 'btn-success',
    warning: 'btn-warning',
    error: 'btn-error'
  }
  
  const sizeClasses = {
    xs: 'btn-xs',
    sm: 'btn-sm',
    md: '',
    lg: 'btn-lg'
  }

  const buttonClasses = [
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <button 
      className={buttonClasses}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="loading loading-spinner loading-sm mr-2"></span>}
      {children}
    </button>
  )
}

// Card Component
interface CardProps {
  children: React.ReactNode
  className?: string
  title?: string
  compact?: boolean
  bordered?: boolean
}

export const Card: React.FC<CardProps> = ({ 
  children, 
  className = '', 
  title, 
  compact = false,
  bordered = false 
}) => {
  const cardClasses = [
    'card',
    'bg-base-100',
    'shadow-lg',
    bordered ? 'card-bordered' : '',
    compact ? 'card-compact' : '',
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={cardClasses}>
      <div className="card-body">
        {title && <h3 className="card-title">{title}</h3>}
        {children}
      </div>
    </div>
  )
}

// Loading Spinner Component
interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg'
  className?: string
}

export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'loading-sm',
    md: 'loading-md', 
    lg: 'loading-lg'
  }

  return (
    <div className={`flex justify-center items-center ${className}`}>
      <span className={`loading loading-spinner ${sizeClasses[size]}`}></span>
    </div>
  )
}

// Loading Overlay Component
interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
  children: React.ReactNode
}

export const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ 
  isLoading, 
  message = 'Loading...', 
  children 
}) => {
  return (
    <div className="relative">
      {children}
      {isLoading && (
        <div className="loading-overlay">
          <LoadingSpinner size="lg" />
          <p className="mt-4 text-lg">{message}</p>
        </div>
      )}
    </div>
  )
}

// Stats Components
interface StatProps {
  title: string
  value: string | number
  description?: string
  className?: string
}

export const Stat: React.FC<StatProps> = ({ title, value, description, className = '' }) => {
  return (
    <div className={`stat ${className}`}>
      <div className="stat-title">{title}</div>
      <div className="stat-value">{value}</div>
      {description && <div className="stat-desc">{description}</div>}
    </div>
  )
}

interface StatsProps {
  children: React.ReactNode
  className?: string
  vertical?: boolean
}

export const Stats: React.FC<StatsProps> = ({ children, className = '', vertical = false }) => {
  const statsClass = vertical 
    ? 'stats stats-vertical shadow bg-base-200' 
    : 'stats stats-vertical lg:stats-horizontal shadow bg-base-200'

  return (
    <div className={`${statsClass} ${className}`}>
      {children}
    </div>
  )
}

// Badge Component
interface BadgeProps {
  children: React.ReactNode
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'success' | 'warning' | 'error' | 'info'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  className?: string
}

export const Badge: React.FC<BadgeProps> = ({ 
  children, 
  variant = 'primary', 
  size = 'md',
  className = ''
}) => {
  const variantClasses = {
    primary: 'badge-primary',
    secondary: 'badge-secondary',
    accent: 'badge-accent',
    ghost: 'badge-ghost',
    success: 'badge-success',
    warning: 'badge-warning',
    error: 'badge-error',
    info: 'badge-info'
  }
  
  const sizeClasses = {
    xs: 'badge-xs',
    sm: 'badge-sm',
    md: '',
    lg: 'badge-lg'
  }

  const badgeClasses = [
    'badge',
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={badgeClasses}>
      {children}
    </div>
  )
}
</file>

<file path="components/LoadingStates.tsx">
'use client'

import { Loader2, Bot, FileText, Upload, CheckCircle2 } from 'lucide-react'

// Generic loading spinner
export function LoadingSpinner({ size = 'md', className = '' }: { 
  size?: 'sm' | 'md' | 'lg', 
  className?: string 
}) {
  const sizeClasses = {
    sm: 'w-4 h-4',
    md: 'w-8 h-8',
    lg: 'w-12 h-12'
  }

  return (
    <Loader2 
      className={`animate-spin ${sizeClasses[size]} ${className}`} 
    />
  )
}

// Loading skeleton for text
export function TextSkeleton({ lines = 3, className = '' }: { 
  lines?: number, 
  className?: string 
}) {
  return (
    <div className={`space-y-2 ${className}`}>
      {Array.from({ length: lines }).map((_, i) => (
        <div
          key={i}
          className={`h-4 bg-gray-200 rounded animate-pulse ${
            i === lines - 1 ? 'w-3/4' : 'w-full'
          }`}
        />
      ))}
    </div>
  )
}

// Loading card skeleton
export function CardSkeleton({ className = '' }: { className?: string }) {
  return (
    <div className={`bg-white rounded-lg shadow p-6 ${className}`}>
      <div className="space-y-4">
        <div className="h-6 bg-gray-200 rounded w-1/3 animate-pulse" />
        <div className="space-y-2">
          <div className="h-4 bg-gray-200 rounded animate-pulse" />
          <div className="h-4 bg-gray-200 rounded w-5/6 animate-pulse" />
        </div>
        <div className="flex space-x-2">
          <div className="h-8 bg-gray-200 rounded w-20 animate-pulse" />
          <div className="h-8 bg-gray-200 rounded w-16 animate-pulse" />
        </div>
      </div>
    </div>
  )
}

// Chat loading animation
export function ChatLoading() {
  return (
    <div className="flex gap-3 justify-start">
      <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
        <Bot className="w-5 h-5 text-white" />
      </div>
      <div className="bg-white px-4 py-3 rounded-2xl rounded-bl-sm shadow-sm border">
        <div className="flex gap-1">
          <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" />
          <div 
            className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" 
            style={{ animationDelay: '0.1s' }} 
          />
          <div 
            className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" 
            style={{ animationDelay: '0.2s' }} 
          />
        </div>
      </div>
    </div>
  )
}

// Form loading overlay
export function FormLoading({ message = 'Loading...' }: { message?: string }) {
  return (
    <div className="absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg">
      <div className="text-center">
        <LoadingSpinner size="lg" className="text-blue-500 mx-auto mb-4" />
        <p className="text-gray-600 font-medium">{message}</p>
      </div>
    </div>
  )
}

// Document upload loading
export function DocumentLoading({ fileName }: { fileName: string }) {
  return (
    <div className="space-y-3">
      <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto" />
      <div className="text-center">
        <p className="text-blue-600 font-medium">Uploading & Verifying...</p>
        <p className="text-sm text-gray-600">{fileName}</p>
      </div>
      <div className="w-full bg-gray-200 rounded-full h-2">
        <div className="bg-blue-500 h-2 rounded-full animate-pulse w-3/4" />
      </div>
    </div>
  )
}

// Progress loading with steps
export function StepLoading({ 
  steps, 
  currentStep 
}: { 
  steps: string[], 
  currentStep: number 
}) {
  return (
    <div className="space-y-4">
      <div className="text-center">
        <LoadingSpinner size="lg" className="text-blue-500 mx-auto mb-4" />
        <p className="text-lg font-medium text-gray-800">Processing...</p>
      </div>
      
      <div className="space-y-2">
        {steps.map((step, index) => (
          <div
            key={index}
            className={`flex items-center gap-3 p-2 rounded ${
              index < currentStep
                ? 'text-green-600'
                : index === currentStep
                ? 'text-blue-600 bg-blue-50'
                : 'text-gray-400'
            }`}
          >
            {index < currentStep ? (
              <CheckCircle2 className="w-5 h-5" />
            ) : index === currentStep ? (
              <LoadingSpinner size="sm" />
            ) : (
              <div className="w-5 h-5 border-2 border-gray-300 rounded-full" />
            )}
            <span className="text-sm">{step}</span>
          </div>
        ))}
      </div>
    </div>
  )
}

// Page loading screen
export function PageLoading({ message = 'Loading...' }: { message?: string }) {
  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center">
      <div className="text-center">
        <div className="relative">
          <div className="w-20 h-20 border-4 border-blue-200 rounded-full animate-spin" />
          <div className="absolute inset-0 w-20 h-20 border-4 border-transparent border-t-blue-500 rounded-full animate-spin" />
        </div>
        <h2 className="text-2xl font-bold text-gray-800 mt-6 mb-2">VisaVerge</h2>
        <p className="text-gray-600">{message}</p>
      </div>
    </div>
  )
}

// Application submission loading
export function SubmissionLoading() {
  const steps = [
    'Validating your information',
    'Uploading documents',
    'Running security checks',
    'Generating application ID',
    'Submitting to embassy'
  ]

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg p-8 max-w-md w-full mx-4">
        <div className="text-center mb-6">
          <div className="w-16 h-16 border-4 border-blue-200 rounded-full animate-spin mx-auto mb-4">
            <div className="w-16 h-16 border-4 border-transparent border-t-blue-500 rounded-full animate-spin" />
          </div>
          <h3 className="text-xl font-bold text-gray-800">Submitting Application</h3>
          <p className="text-gray-600 text-sm mt-2">This may take a few moments...</p>
        </div>

        <div className="space-y-3">
          {steps.map((step, index) => (
            <div key={index} className="flex items-center gap-3">
              <div className="w-6 h-6 flex items-center justify-center">
                {index < 2 ? (
                  <CheckCircle2 className="w-5 h-5 text-green-500" />
                ) : index === 2 ? (
                  <LoadingSpinner size="sm" className="text-blue-500" />
                ) : (
                  <div className="w-3 h-3 border-2 border-gray-300 rounded-full" />
                )}
              </div>
              <span className={`text-sm ${
                index < 2 ? 'text-green-600' : 
                index === 2 ? 'text-blue-600' : 
                'text-gray-400'
              }`}>
                {step}
              </span>
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="components/Notification.tsx">
'use client'

import { useState, useEffect, createContext, useContext, ReactNode } from 'react'
import { CheckCircle2, AlertCircle, Info, X, AlertTriangle } from 'lucide-react'

type NotificationType = 'success' | 'error' | 'warning' | 'info'

interface Notification {
  id: string
  type: NotificationType
  title: string
  message?: string
  duration?: number
  action?: {
    label: string
    onClick: () => void
  }
}

interface NotificationContextType {
  notifications: Notification[]
  addNotification: (notification: Omit<Notification, 'id'>) => void
  removeNotification: (id: string) => void
  clearAll: () => void
}

const NotificationContext = createContext<NotificationContextType | undefined>(undefined)

export function NotificationProvider({ children }: { children: ReactNode }) {
  const [notifications, setNotifications] = useState<Notification[]>([])

  const addNotification = (notification: Omit<Notification, 'id'>) => {
    const id = Math.random().toString(36).substr(2, 9)
    const newNotification = { ...notification, id }
    
    setNotifications(prev => [...prev, newNotification])

    // Auto remove after duration (default 5 seconds)
    const duration = notification.duration ?? 5000
    if (duration > 0) {
      setTimeout(() => {
        removeNotification(id)
      }, duration)
    }
  }

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id))
  }

  const clearAll = () => {
    setNotifications([])
  }

  return (
    <NotificationContext.Provider value={{
      notifications,
      addNotification,
      removeNotification,
      clearAll
    }}>
      {children}
      <NotificationContainer />
    </NotificationContext.Provider>
  )
}

export function useNotifications() {
  const context = useContext(NotificationContext)
  if (!context) {
    throw new Error('useNotifications must be used within NotificationProvider')
  }
  return context
}

function NotificationContainer() {
  const { notifications } = useNotifications()

  return (
    <div className="fixed top-4 right-4 z-50 space-y-3 max-w-sm">
      {notifications.map(notification => (
        <NotificationItem key={notification.id} notification={notification} />
      ))}
    </div>
  )
}

function NotificationItem({ notification }: { notification: Notification }) {
  const { removeNotification } = useNotifications()
  const [isVisible, setIsVisible] = useState(false)

  useEffect(() => {
    // Trigger entrance animation
    setTimeout(() => setIsVisible(true), 50)
  }, [])

  const handleClose = () => {
    setIsVisible(false)
    setTimeout(() => removeNotification(notification.id), 300)
  }

  const getIcon = () => {
    switch (notification.type) {
      case 'success':
        return <CheckCircle2 className="w-5 h-5 text-green-500" />
      case 'error':
        return <AlertCircle className="w-5 h-5 text-red-500" />
      case 'warning':
        return <AlertTriangle className="w-5 h-5 text-yellow-500" />
      case 'info':
        return <Info className="w-5 h-5 text-blue-500" />
    }
  }

  const getBorderColor = () => {
    switch (notification.type) {
      case 'success':
        return 'border-l-green-500'
      case 'error':
        return 'border-l-red-500'
      case 'warning':
        return 'border-l-yellow-500'
      case 'info':
        return 'border-l-blue-500'
    }
  }

  return (
    <div
      className={`
        transform transition-all duration-300 ease-in-out
        ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}
        bg-white border-l-4 ${getBorderColor()} shadow-lg rounded-lg p-4 min-w-80
      `}
    >
      <div className="flex items-start gap-3">
        <div className="flex-shrink-0 pt-0.5">
          {getIcon()}
        </div>
        
        <div className="flex-1 min-w-0">
          <h4 className="text-sm font-semibold text-gray-900">
            {notification.title}
          </h4>
          {notification.message && (
            <p className="text-sm text-gray-600 mt-1">
              {notification.message}
            </p>
          )}
          {notification.action && (
            <button
              onClick={notification.action.onClick}
              className="text-sm text-blue-600 hover:text-blue-800 font-medium mt-2 underline"
            >
              {notification.action.label}
            </button>
          )}
        </div>

        <button
          onClick={handleClose}
          className="flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors"
        >
          <X className="w-4 h-4" />
        </button>
      </div>
    </div>
  )
}

// Convenience hooks for different notification types
export function useSuccessNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'success', title, message })
  }
}

export function useErrorNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'error', title, message })
  }
}

export function useWarningNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'warning', title, message })
  }
}

export function useInfoNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'info', title, message })
  }
}

// Alert component for inline notifications
export function Alert({ 
  type, 
  title, 
  message, 
  onClose,
  className = ''
}: {
  type: NotificationType
  title: string
  message?: string
  onClose?: () => void
  className?: string
}) {
  const getIcon = () => {
    switch (type) {
      case 'success':
        return <CheckCircle2 className="w-5 h-5 text-green-500" />
      case 'error':
        return <AlertCircle className="w-5 h-5 text-red-500" />
      case 'warning':
        return <AlertTriangle className="w-5 h-5 text-yellow-500" />
      case 'info':
        return <Info className="w-5 h-5 text-blue-500" />
    }
  }

  const getBgColor = () => {
    switch (type) {
      case 'success':
        return 'bg-green-50 border-green-200'
      case 'error':
        return 'bg-red-50 border-red-200'
      case 'warning':
        return 'bg-yellow-50 border-yellow-200'
      case 'info':
        return 'bg-blue-50 border-blue-200'
    }
  }

  return (
    <div className={`border rounded-lg p-4 ${getBgColor()} ${className}`}>
      <div className="flex items-start gap-3">
        <div className="flex-shrink-0 pt-0.5">
          {getIcon()}
        </div>
        
        <div className="flex-1 min-w-0">
          <h4 className="text-sm font-semibold text-gray-900">
            {title}
          </h4>
          {message && (
            <p className="text-sm text-gray-600 mt-1">
              {message}
            </p>
          )}
        </div>

        {onClose && (
          <button
            onClick={onClose}
            className="flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors"
          >
            <X className="w-4 h-4" />
          </button>
        )}
      </div>
    </div>
  )
}

// Banner component for important site-wide notifications
export function Banner({ 
  type, 
  message, 
  action,
  onClose 
}: {
  type: NotificationType
  message: string
  action?: {
    label: string
    onClick: () => void
  }
  onClose?: () => void
}) {
  const getBgColor = () => {
    switch (type) {
      case 'success':
        return 'bg-green-600'
      case 'error':
        return 'bg-red-600'
      case 'warning':
        return 'bg-yellow-600'
      case 'info':
        return 'bg-blue-600'
    }
  }

  return (
    <div className={`${getBgColor()} text-white`}>
      <div className="max-w-7xl mx-auto py-3 px-4">
        <div className="flex items-center justify-between flex-wrap">
          <div className="flex items-center gap-3">
            <div className="flex-shrink-0">
              {type === 'success' && <CheckCircle2 className="w-5 h-5" />}
              {type === 'error' && <AlertCircle className="w-5 h-5" />}
              {type === 'warning' && <AlertTriangle className="w-5 h-5" />}
              {type === 'info' && <Info className="w-5 h-5" />}
            </div>
            <p className="text-sm font-medium">{message}</p>
          </div>
          
          <div className="flex items-center gap-3">
            {action && (
              <button
                onClick={action.onClick}
                className="text-sm underline hover:no-underline font-medium"
              >
                {action.label}
              </button>
            )}
            {onClose && (
              <button
                onClick={onClose}
                className="text-white hover:text-gray-200 transition-colors"
              >
                <X className="w-5 h-5" />
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="components/repomix-output.xml">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
Alert/
  AlertContainer.tsx
Layout/
  DarkModeSwitcher/
    DarkModeSelect/
      DarkModeSelect.tsx
    DarkModeSwitcher.tsx
  Footer/
    Footer.tsx
  Navbar/
    Navbar.tsx
  Layout.tsx
UI/
  Button.tsx
  Card.tsx
  index.tsx
  LoadingOverlay.tsx
  LoadingSpinner.tsx
  Stats.tsx
ChatInterface.tsx
DocumentUpload.tsx
DynamicForm.tsx
index.tsx
LoadingStates.tsx
Notification.tsx
StatusTracker.tsx
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="Alert/AlertContainer.tsx">
import React from 'react'
import { useAlertStore, AlertType } from '@/lib/stores/alert.store'

interface AlertItemProps {
  id: string
  type: AlertType
  message: string
  onRemove: (id: string) => void
}

const AlertItem: React.FC<AlertItemProps> = ({ id, type, message, onRemove }) => {
  const getAlertClasses = (type: AlertType) => {
    const baseClasses = "alert w-auto max-w-md shadow-lg transition-all duration-300"
    
    switch (type) {
      case 'success':
        return `${baseClasses} alert-success`
      case 'error':
        return `${baseClasses} alert-error`
      case 'warning':
        return `${baseClasses} alert-warning`
      case 'info':
      default:
        return `${baseClasses} alert-info`
    }
  }

  const getIcon = (type: AlertType) => {
    switch (type) {
      case 'success':
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )
      case 'error':
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )
      case 'warning':
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
          </svg>
        )
      case 'info':
      default:
        return (
          <svg xmlns="http://www.w3.org/2000/svg" className="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )
    }
  }

  return (
    <div className={getAlertClasses(type)}>
      {getIcon(type)}
      <span>{message}</span>
      <button 
        className="btn btn-sm btn-ghost btn-circle ml-2"
        onClick={() => onRemove(id)}
      >
        ‚úï
      </button>
    </div>
  )
}

const AlertContainer: React.FC = () => {
  const { alerts, removeAlert } = useAlertStore()

  if (alerts.length === 0) return null

  return (
    <div className="fixed bottom-4 right-4 pointer-events-none z-50">
      <div className="flex flex-col space-y-2">
        {alerts.map((alert, index) => (
          <div 
            key={alert.id}
            className="pointer-events-auto transform transition-all duration-300 ease-in-out"
            style={{ 
              zIndex: 1000 - index 
            }}
          >
            <AlertItem
              id={alert.id}
              type={alert.type}
              message={alert.message}
              onRemove={removeAlert}
            />
          </div>
        ))}
      </div>
    </div>
  )
}

export default AlertContainer
</file>

<file path="Layout/DarkModeSwitcher/DarkModeSelect/DarkModeSelect.tsx">
import React from "react"

interface DarkModeSelectProps {
	themeSwitch: Function
}

const DarkModeSelect = ({ themeSwitch }: DarkModeSelectProps) => {
	return (
		<ul tabIndex={0} className="menu menu-compact dropdown-content mt-3 p-2 shadow rounded-box w-52">
			<li>
				<span onClick={() => themeSwitch("default")}>System Default</span>
			</li>
			<li>
				<span onClick={() => themeSwitch("light")}>Light</span>
			</li>
			<li>
				<span onClick={() => themeSwitch("dark")}>Dark</span>
			</li>
		</ul>
	)
}

export default DarkModeSelect
</file>

<file path="Layout/DarkModeSwitcher/DarkModeSwitcher.tsx">
import React, { useEffect, useState } from "react"
import { THEMES } from "@/lib/constants/theme.constants"
import DarkModeSelect from "./DarkModeSelect/DarkModeSelect"

const DarkModeSwitcher = () => {
	const [showMoon, setShowMoon] = useState(true)
	const [isSystemDark, setIsSystemDark] = useState(
		typeof window !== "undefined" && window.matchMedia("screen and (prefers-color-scheme: dark)").matches
	)

	typeof window !== "undefined" &&
		window.matchMedia("screen and (prefers-color-scheme: dark)").addEventListener("change", (event) => {
			setIsSystemDark(window.matchMedia("screen and (prefers-color-scheme: dark)").matches)
		})

	useEffect(() => {
		const userTheme = localStorage.getItem("theme")

		if (userTheme === "dark") applyDark()
		if (userTheme === "light") applyLight()

		if (!userTheme || userTheme === "default") {
			if (isSystemDark) applyDark()
			else applyLight()
		}
	}, [isSystemDark])

	const applyDark = () => {
		document.body.setAttribute("data-theme", THEMES.DARK)
		setShowMoon(false)
	}

	const applyLight = () => {
		document.body.setAttribute("data-theme", THEMES.LIGHT)
		setShowMoon(true)
	}

	const themeSwitch = (theme: string) => {
		if (document.activeElement instanceof HTMLElement) {
			document.activeElement.blur()
		}
		localStorage.setItem("theme", theme)

		if (theme === "default") {
			if (isSystemDark) applyDark()
			else applyLight()
		}

		if (theme === "dark") applyDark()
		if (theme === "light") applyLight()
	}

	return (
		<div className="flex-none">
			<div tabIndex={0} className="dropdown dropdown-end">
				{showMoon ? (
					<button tabIndex={0} className="btn btn-ghost btn-circle">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							strokeWidth={2}
							stroke="currentColor"
							className="w-6 h-6">
							<path
								strokeLinecap="round"
								strokeLinejoin="round"
								d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
							/>
						</svg>
					</button>
				) : (
					<button tabIndex={0} className="btn btn-ghost btn-circle">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							strokeWidth={2}
							stroke="currentColor"
							className="w-6 h-6">
							<path
								strokeLinecap="round"
								strokeLinejoin="round"
								d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
							/>
						</svg>
					</button>
				)}
				<DarkModeSelect themeSwitch={themeSwitch} />
			</div>
		</div>
	)
}

export default DarkModeSwitcher
</file>

<file path="Layout/Footer/Footer.tsx">
import React from "react"

const Footer = () => {
	return (
		<footer className="footer flex flex-row flex-wrap justify-between p-5 opacity-50 gap-y-2 mb-2 md:mb-0">
			<div className="text-sm">
				¬© 2025 SKS Trainer. Sportk√ºstenschifferschein Pr√ºfungsvorbereitung.
			</div>
		</footer>
	)
}

export default Footer
</file>

<file path="Layout/Navbar/Navbar.tsx">
"use client"

import { useRouter, usePathname } from "next/navigation"
import React from "react"
import DarkModeSwitcher from "@/components/Layout/DarkModeSwitcher/DarkModeSwitcher"

const Navbar = () => {
  const router = useRouter()
  const pathname = usePathname()

  return (
    <div className="navbar">
      <div className="flex-1">
        {pathname === "/" ? (
          <button className="btn btn-ghost normal-case text-2xl logo" onClick={() => window.location.reload()}>
            ‚öì SKS Trainer
          </button>
        ) : (
          <button className="btn btn-ghost normal-case text-2xl logo" onClick={() => router.push("/")}>
            ‚öì SKS Trainer
          </button>
        )}
      </div>
      
      <div className="flex-none gap-2">
        <DarkModeSwitcher />
      </div>
    </div>
  )
}

export default Navbar
</file>

<file path="Layout/Layout.tsx">
import React, { ReactNode } from "react"
import AlertContainer from "@/components/Alert/AlertContainer"
import Footer from "./Footer/Footer"
import Navbar from "./Navbar/Navbar"

interface LayoutProps {
  children: ReactNode
}

const Layout = (props: LayoutProps) => {
  return (
    <div className="flex flex-col min-h-screen justify-between">
      <Navbar />
      <AlertContainer />
      <div className="container pt-14 pb-24">{props.children}</div>
      <Footer />
    </div>
  )
}

export default Layout
</file>

<file path="UI/Button.tsx">
import React from 'react'

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  loading?: boolean
  children: React.ReactNode
}

const Button: React.FC<ButtonProps> = ({ 
  variant = 'primary',
  size = 'md',
  loading = false,
  children,
  className = '',
  disabled,
  ...props
}) => {
  const baseClasses = 'btn'
  const variantClasses = {
    primary: 'btn-primary',
    secondary: 'btn-secondary',
    accent: 'btn-accent',
    ghost: 'btn-ghost',
    outline: 'btn-outline'
  }
  
  const sizeClasses = {
    xs: 'btn-xs',
    sm: 'btn-sm',
    md: '',
    lg: 'btn-lg'
  }

  const buttonClasses = [
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <button 
      className={buttonClasses}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="loading loading-spinner loading-sm mr-2"></span>}
      {children}
    </button>
  )
}

export default Button
</file>

<file path="UI/Card.tsx">
import React from 'react'

interface CardProps {
  children: React.ReactNode
  className?: string
  title?: string
}

const Card: React.FC<CardProps> = ({ children, className = '', title }) => {
  return (
    <div className={`card bg-base-200 shadow ${className}`}>
      <div className="card-body">
        {title && <h3 className="card-title">{title}</h3>}
        {children}
      </div>
    </div>
  )
}

export default Card
</file>

<file path="UI/index.tsx">
import React from 'react'

// Button Component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline' | 'success' | 'warning' | 'error'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  loading?: boolean
  children: React.ReactNode
}

export const Button: React.FC<ButtonProps> = ({ 
  variant = 'primary',
  size = 'md',
  loading = false,
  children,
  className = '',
  disabled,
  ...props
}) => {
  const baseClasses = 'btn'
  const variantClasses = {
    primary: 'btn-primary',
    secondary: 'btn-secondary',
    accent: 'btn-accent',
    ghost: 'btn-ghost',
    outline: 'btn-outline',
    success: 'btn-success',
    warning: 'btn-warning',
    error: 'btn-error'
  }
  
  const sizeClasses = {
    xs: 'btn-xs',
    sm: 'btn-sm',
    md: '',
    lg: 'btn-lg'
  }

  const buttonClasses = [
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <button 
      className={buttonClasses}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="loading loading-spinner loading-sm mr-2"></span>}
      {children}
    </button>
  )
}

// Card Component
interface CardProps {
  children: React.ReactNode
  className?: string
  title?: string
  compact?: boolean
  bordered?: boolean
}

export const Card: React.FC<CardProps> = ({ 
  children, 
  className = '', 
  title, 
  compact = false,
  bordered = false 
}) => {
  const cardClasses = [
    'card',
    'bg-base-100',
    'shadow-lg',
    bordered ? 'card-bordered' : '',
    compact ? 'card-compact' : '',
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={cardClasses}>
      <div className="card-body">
        {title && <h3 className="card-title">{title}</h3>}
        {children}
      </div>
    </div>
  )
}

// Loading Spinner Component
interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg'
  className?: string
}

export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'loading-sm',
    md: 'loading-md', 
    lg: 'loading-lg'
  }

  return (
    <div className={`flex justify-center items-center ${className}`}>
      <span className={`loading loading-spinner ${sizeClasses[size]}`}></span>
    </div>
  )
}

// Loading Overlay Component
interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
  children: React.ReactNode
}

export const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ 
  isLoading, 
  message = 'Loading...', 
  children 
}) => {
  return (
    <div className="relative">
      {children}
      {isLoading && (
        <div className="loading-overlay">
          <LoadingSpinner size="lg" />
          <p className="mt-4 text-lg">{message}</p>
        </div>
      )}
    </div>
  )
}

// Stats Components
interface StatProps {
  title: string
  value: string | number
  description?: string
  className?: string
}

export const Stat: React.FC<StatProps> = ({ title, value, description, className = '' }) => {
  return (
    <div className={`stat ${className}`}>
      <div className="stat-title">{title}</div>
      <div className="stat-value">{value}</div>
      {description && <div className="stat-desc">{description}</div>}
    </div>
  )
}

interface StatsProps {
  children: React.ReactNode
  className?: string
  vertical?: boolean
}

export const Stats: React.FC<StatsProps> = ({ children, className = '', vertical = false }) => {
  const statsClass = vertical 
    ? 'stats stats-vertical shadow bg-base-200' 
    : 'stats stats-vertical lg:stats-horizontal shadow bg-base-200'

  return (
    <div className={`${statsClass} ${className}`}>
      {children}
    </div>
  )
}

// Badge Component
interface BadgeProps {
  children: React.ReactNode
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'success' | 'warning' | 'error' | 'info'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  className?: string
}

export const Badge: React.FC<BadgeProps> = ({ 
  children, 
  variant = 'primary', 
  size = 'md',
  className = ''
}) => {
  const variantClasses = {
    primary: 'badge-primary',
    secondary: 'badge-secondary',
    accent: 'badge-accent',
    ghost: 'badge-ghost',
    success: 'badge-success',
    warning: 'badge-warning',
    error: 'badge-error',
    info: 'badge-info'
  }
  
  const sizeClasses = {
    xs: 'badge-xs',
    sm: 'badge-sm',
    md: '',
    lg: 'badge-lg'
  }

  const badgeClasses = [
    'badge',
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={badgeClasses}>
      {children}
    </div>
  )
}
</file>

<file path="UI/LoadingOverlay.tsx">
import React from 'react'
import LoadingSpinner from './LoadingSpinner'

interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
  children: React.ReactNode
}

const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ 
  isLoading, 
  message = 'Loading...', 
  children 
}) => {
  return (
    <div className="relative">
      {children}
      {isLoading && (
        <div className="absolute inset-0 bg-base-100/80 backdrop-blur-sm flex flex-col justify-center items-center z-50">
          <LoadingSpinner size="lg" />
          <p className="mt-4 text-lg">{message}</p>
        </div>
      )}
    </div>
  )
}

export default LoadingOverlay
</file>

<file path="UI/LoadingSpinner.tsx">
import React from 'react'

interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg'
  className?: string
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'loading-sm',
    md: 'loading-md', 
    lg: 'loading-lg'
  }

  return (
    <div className={`flex justify-center items-center ${className}`}>
      <span className={`loading loading-spinner ${sizeClasses[size]}`}></span>
    </div>
  )
}

export default LoadingSpinner
</file>

<file path="UI/Stats.tsx">
import React from 'react'

interface StatProps {
  title: string
  value: string | number
  description?: string
  className?: string
}

const Stat: React.FC<StatProps> = ({ title, value, description, className = '' }) => {
  return (
    <div className={`stat ${className}`}>
      <div className="stat-title">{title}</div>
      <div className="stat-value">{value}</div>
      {description && <div className="stat-desc">{description}</div>}
    </div>
  )
}

interface StatsProps {
  children: React.ReactNode
  className?: string
  vertical?: boolean
}

const Stats: React.FC<StatsProps> = ({ children, className = '', vertical = false }) => {
  const statsClass = vertical 
    ? 'stats stats-vertical shadow bg-base-200' 
    : 'stats stats-vertical lg:stats-horizontal shadow bg-base-200'

  return (
    <div className={`${statsClass} ${className}`}>
      {children}
    </div>
  )
}

export { Stats, Stat }
</file>

<file path="ChatInterface.tsx">
'use client'

import { useState, useRef, useEffect } from 'react'
import { Send, Bot, User, Sparkles } from 'lucide-react'
import { Message, VisaType } from '@/types'
import { api } from '@/utils/api'
import { Button, Badge } from '@/components/UI'

interface ChatInterfaceProps {
  onVisaTypeSelected?: (visaType: VisaType) => void
}

export default function ChatInterface({ onVisaTypeSelected }: ChatInterfaceProps) {
  const [messages, setMessages] = useState<Message[]>([
    {
      id: '1',
      text: "Hi! I'm AVA, your AI visa assistant. I can help you find the right visa and guide you through the application process. What type of travel are you planning? üõÇ‚úàÔ∏è",
      sender: 'ava',
      timestamp: new Date()
    }
  ])
  const [input, setInput] = useState('')
  const [isLoading, setIsLoading] = useState(false)
  const messagesEndRef = useRef<HTMLDivElement>(null)

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
  }

  useEffect(() => {
    scrollToBottom()
  }, [messages])

  const sendMessage = async () => {
    if (!input.trim() || isLoading) return

    const userMessage: Message = {
      id: Date.now().toString(),
      text: input.trim(),
      sender: 'user',
      timestamp: new Date()
    }

    setMessages(prev => [...prev, userMessage])
    setInput('')
    setIsLoading(true)

    try {
      const response = await api.chat(input.trim())
      
      const avaMessage: Message = {
        id: (Date.now() + 1).toString(),
        text: response.response,
        sender: 'ava',
        timestamp: new Date(),
        metadata: {
          suggestedVisaType: response.suggestedVisaType,
          nextAction: response.nextAction,
          confidence: response.confidence
        }
      }

      setMessages(prev => [...prev, avaMessage])

      // If AVA suggests starting a form, trigger the callback
      if (response.nextAction === 'start_form' && response.suggestedVisaType && onVisaTypeSelected) {
        setTimeout(() => {
          onVisaTypeSelected(response.suggestedVisaType!)
        }, 1000)
      }
    } catch (error) {
      console.error('Error sending message:', error)
      const errorMessage: Message = {
        id: (Date.now() + 1).toString(),
        text: "I'm sorry, I'm having trouble connecting right now. Please try again in a moment.",
        sender: 'ava',
        timestamp: new Date()
      }
      setMessages(prev => [...prev, errorMessage])
    } finally {
      setIsLoading(false)
    }
  }

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault()
      sendMessage()
    }
  }

  const quickReplies = [
    "I need a tourist visa",
    "Business visa application", 
    "Student visa help",
    "Family visit visa"
  ]

  return (
    <div className="flex flex-col h-full bg-base-100 rounded-lg shadow-lg overflow-hidden border border-base-300">
      {/* Header */}
      <div className="bg-gradient-to-r from-primary to-secondary text-white p-4">
        <div className="flex items-center gap-3">
          <div className="relative">
            <div className="avatar">
              <div className="w-10 rounded-full bg-base-100">
                <Bot className="w-6 h-6 text-primary m-2" />
              </div>
            </div>
            <div className="absolute -top-1 -right-1 w-3 h-3 bg-success rounded-full animate-pulse" />
          </div>
          <div>
            <h3 className="font-semibold text-lg flex items-center gap-2">
              AVA - AI Visa Assistant
              <Badge variant="ghost" className="text-xs bg-white/20 text-white border-white/30">
                <Sparkles className="w-3 h-3 mr-1" />
                AI
              </Badge>
            </h3>
            <p className="text-primary-content/70 text-sm">Online ‚Ä¢ Ready to help</p>
          </div>
        </div>
      </div>

      {/* Messages */}
      <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-base-50">
        {messages.map(message => (
          <div
            key={message.id}
            className={`chat ${message.sender === 'user' ? 'chat-end' : 'chat-start'} chat-message`}
          >
            <div className="chat-image avatar">
              <div className="w-8 rounded-full">
                {message.sender === 'ava' ? (
                  <div className="bg-primary text-white rounded-full flex items-center justify-center w-8 h-8">
                    <Bot className="w-5 h-5" />
                  </div>
                ) : (
                  <div className="bg-neutral text-white rounded-full flex items-center justify-center w-8 h-8">
                    <User className="w-5 h-5" />
                  </div>
                )}
              </div>
            </div>
            
            <div className={`chat-bubble ${
              message.sender === 'user' 
                ? 'chat-bubble-primary' 
                : 'chat-bubble-secondary'
            }`}>
              <p className="whitespace-pre-wrap leading-relaxed">{message.text}</p>
              
              {/* Show confidence for AVA messages */}
              {message.sender === 'ava' && message.metadata?.confidence && (
                <div className="mt-2 pt-2 border-t border-white/20">
                  <Badge variant="ghost" size="xs" className="bg-white/20 text-white border-white/30">
                    <Sparkles className="w-3 h-3 mr-1" />
                    {Math.round(message.metadata.confidence * 100)}% confident
                  </Badge>
                </div>
              )}
            </div>
            
            <div className="chat-footer opacity-50 text-xs">
              {message.timestamp.toLocaleTimeString()}
            </div>
          </div>
        ))}

        {/* Loading indicator */}
        {isLoading && (
          <div className="chat chat-start">
            <div className="chat-image avatar">
              <div className="w-8 rounded-full">
                <div className="bg-primary text-white rounded-full flex items-center justify-center w-8 h-8">
                  <Bot className="w-5 h-5" />
                </div>
              </div>
            </div>
            <div className="chat-bubble chat-bubble-secondary">
              <div className="flex gap-1">
                <div className="w-2 h-2 bg-current rounded-full animate-bounce" />
                <div 
                  className="w-2 h-2 bg-current rounded-full animate-bounce" 
                  style={{ animationDelay: '0.1s' }} 
                />
                <div 
                  className="w-2 h-2 bg-current rounded-full animate-bounce" 
                  style={{ animationDelay: '0.2s' }} 
                />
              </div>
            </div>
          </div>
        )}
        
        <div ref={messagesEndRef} />
      </div>

      {/* Quick Replies */}
      {messages.length === 1 && (
        <div className="px-4 py-3 bg-base-200 border-t border-base-300">
          <p className="text-xs opacity-60 mb-2">Quick options:</p>
          <div className="flex flex-wrap gap-2">
            {quickReplies.map((reply, index) => (
              <Button
                key={index}
                variant="ghost"
                size="xs"
                onClick={() => {
                  setInput(reply)
                  setTimeout(sendMessage, 100)
                }}
                className="text-xs"
              >
                {reply}
              </Button>
            ))}
          </div>
        </div>
      )}

      {/* Input Area */}
      <div className="p-4 bg-base-100 border-t border-base-300">
        <div className="flex gap-2">
          <div className="flex-1">
            <textarea
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Ask AVA anything about visas..."
              className="textarea textarea-bordered w-full resize-none"
              rows={1}
              disabled={isLoading}
            />
          </div>
          <Button
            onClick={sendMessage}
            disabled={!input.trim() || isLoading}
            loading={isLoading}
            className="btn-circle"
          >
            <Send className="w-4 h-4" />
          </Button>
        </div>
        <p className="text-xs opacity-50 mt-2 text-center">
          AVA can make mistakes. Please verify important information.
        </p>
      </div>
    </div>
  )
}
</file>

<file path="DocumentUpload.tsx">
'use client'

import { useState, useRef, useCallback } from 'react'
import { Upload, FileText, CheckCircle2, AlertCircle, X, Camera, Trash2 } from 'lucide-react'
import { Document, DocumentType, VisaType } from '@/types'

interface DocumentUploadProps {
  visaType: VisaType
  onDocumentsChange?: (documents: Document[]) => void
  onComplete?: () => void
}

const REQUIRED_DOCUMENTS: Record<VisaType, DocumentType[]> = {
  tourist: ['passport', 'photo', 'bank_statement', 'travel_insurance'],
  business: ['passport', 'photo', 'invitation_letter', 'employment_letter'],
  student: ['passport', 'photo', 'bank_statement', 'invitation_letter'],
  work: ['passport', 'photo', 'employment_letter', 'invitation_letter'],
  family_visit: ['passport', 'photo', 'invitation_letter', 'bank_statement'],
  transit: ['passport', 'photo', 'flight_itinerary']
}

const DOCUMENT_NAMES: Record<DocumentType, string> = {
  passport: 'Passport (Photo Page)',
  photo: 'Passport Photo',
  bank_statement: 'Bank Statement',
  invitation_letter: 'Invitation Letter',
  travel_insurance: 'Travel Insurance',
  employment_letter: 'Employment Letter',
  flight_itinerary: 'Flight Itinerary'
}

const DOCUMENT_DESCRIPTIONS: Record<DocumentType, string> = {
  passport: 'Clear photo of your passport information page',
  photo: 'Recent passport-sized photo (white background)',
  bank_statement: 'Last 3 months bank statements showing sufficient funds',
  invitation_letter: 'Official invitation letter from host organization',
  travel_insurance: 'Valid travel insurance covering your entire stay',
  employment_letter: 'Letter from employer confirming your employment',
  flight_itinerary: 'Flight booking confirmation or itinerary'
}

export default function DocumentUpload({ visaType, onDocumentsChange, onComplete }: DocumentUploadProps) {
  const [documents, setDocuments] = useState<Document[]>([])
  const [uploadingDocs, setUploadingDocs] = useState<Set<string>>(new Set())
  const [draggedOver, setDraggedOver] = useState<string | null>(null)
  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({})

  const requiredDocs = REQUIRED_DOCUMENTS[visaType] || []

  // Simulate document verification
  const verifyDocument = async (file: File, docType: DocumentType): Promise<boolean> => {
    // Simulate upload and verification time
    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 2000))
    
    // Simulate verification results (90% success rate)
    return Math.random() > 0.1
  }

  const handleFileUpload = useCallback(async (file: File, docType: DocumentType) => {
    const docId = `${docType}_${Date.now()}`
    
    setUploadingDocs(prev => new Set([...prev, docId]))

    try {
      const verified = await verifyDocument(file, docType)
      
      const newDocument: Document = {
        id: docId,
        name: file.name,
        type: docType,
        size: file.size,
        uploadedAt: new Date(),
        verified,
        url: URL.createObjectURL(file) // For preview
      }

      setDocuments(prev => {
        // Remove any existing document of the same type
        const filtered = prev.filter(doc => doc.type !== docType)
        const updated = [...filtered, newDocument]
        onDocumentsChange?.(updated)
        return updated
      })
    } catch (error) {
      console.error('Error uploading document:', error)
    } finally {
      setUploadingDocs(prev => {
        const newSet = new Set(prev)
        newSet.delete(docId)
        return newSet
      })
    }
  }, [onDocumentsChange])

  const handleDrop = useCallback((e: React.DragEvent, docType: DocumentType) => {
    e.preventDefault()
    setDraggedOver(null)
    
    const files = Array.from(e.dataTransfer.files)
    if (files.length > 0) {
      handleFileUpload(files[0], docType)
    }
  }, [handleFileUpload])

  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>, docType: DocumentType) => {
    const files = e.target.files
    if (files && files.length > 0) {
      handleFileUpload(files[0], docType)
    }
  }

  const removeDocument = (docType: DocumentType) => {
    setDocuments(prev => {
      const updated = prev.filter(doc => doc.type !== docType)
      onDocumentsChange?.(updated)
      return updated
    })
  }

  const getDocumentForType = (docType: DocumentType) => {
    return documents.find(doc => doc.type === docType)
  }

  const isUploading = (docType: DocumentType) => {
    return Array.from(uploadingDocs).some(id => id.startsWith(docType))
  }

  const formatFileSize = (bytes: number) => {
    if (bytes === 0) return '0 Bytes'
    const k = 1024
    const sizes = ['Bytes', 'KB', 'MB', 'GB']
    const i = Math.floor(Math.log(bytes) / Math.log(k))
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]
  }

  const allRequiredUploaded = requiredDocs.every(docType => 
    getDocumentForType(docType)?.verified
  )

  const uploadProgress = (documents.filter(doc => doc.verified).length / requiredDocs.length) * 100

  return (
    <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
      {/* Header */}
      <div className="bg-gradient-to-r from-green-600 to-blue-600 text-white p-6">
        <h2 className="text-xl font-bold mb-2">Upload Required Documents</h2>
        <p className="text-green-100 text-sm">
          Please upload the following documents for your {visaType} visa application
        </p>
        
        {/* Progress */}
        <div className="mt-4">
          <div className="flex justify-between text-sm text-green-100 mb-2">
            <span>Upload Progress</span>
            <span>{Math.round(uploadProgress)}% complete</span>
          </div>
          <div className="w-full bg-green-500 bg-opacity-30 rounded-full h-2">
            <div 
              className="bg-white h-2 rounded-full transition-all duration-500"
              style={{ width: `${uploadProgress}%` }}
            />
          </div>
        </div>
      </div>

      <div className="p-6">
        {/* Document grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {requiredDocs.map(docType => {
            const document = getDocumentForType(docType)
            const uploading = isUploading(docType)
            
            return (
              <div
                key={docType}
                className={`border-2 border-dashed rounded-lg p-6 transition-all ${
                  draggedOver === docType
                    ? 'border-blue-500 bg-blue-50'
                    : document?.verified
                    ? 'border-green-500 bg-green-50'
                    : document && !document.verified
                    ? 'border-red-500 bg-red-50'
                    : 'border-gray-300 hover:border-blue-400'
                }`}
                onDragOver={(e) => {
                  e.preventDefault()
                  setDraggedOver(docType)
                }}
                onDragLeave={() => setDraggedOver(null)}
                onDrop={(e) => handleDrop(e, docType)}
              >
                <input
                  ref={el => fileInputRefs.current[docType] = el}
                  type="file"
                  accept="image/*,.pdf"
                  onChange={(e) => handleFileInput(e, docType)}
                  className="hidden"
                />

                <div className="text-center">
                  {uploading ? (
                    <div className="space-y-3">
                      <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>
                      <p className="text-blue-600 font-medium">Uploading & Verifying...</p>
                      <p className="text-sm text-gray-600">Please wait while we process your document</p>
                    </div>
                  ) : document ? (
                    <div className="space-y-3">
                      <div className="flex items-center justify-center">
                        {document.verified ? (
                          <CheckCircle2 className="w-12 h-12 text-green-500" />
                        ) : (
                          <AlertCircle className="w-12 h-12 text-red-500" />
                        )}
                      </div>
                      
                      <div>
                        <p className="font-medium text-gray-800">{document.name}</p>
                        <p className="text-sm text-gray-600">{formatFileSize(document.size)}</p>
                        <p className={`text-sm font-medium ${
                          document.verified ? 'text-green-600' : 'text-red-600'
                        }`}>
                          {document.verified ? 'Verified ‚úì' : 'Verification Failed ‚úó'}
                        </p>
                      </div>

                      <div className="flex gap-2 justify-center">
                        <button
                          onClick={() => fileInputRefs.current[docType]?.click()}
                          className="px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600"
                        >
                          Replace
                        </button>
                        <button
                          onClick={() => removeDocument(docType)}
                          className="px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600"
                        >
                          <Trash2 className="w-4 h-4" />
                        </button>
                      </div>
                    </div>
                  ) : (
                    <div className="space-y-3">
                      <Upload className="w-12 h-12 text-gray-400 mx-auto" />
                      <div>
                        <h3 className="font-medium text-gray-800 mb-1">
                          {DOCUMENT_NAMES[docType]}
                        </h3>
                        <p className="text-sm text-gray-600 mb-3">
                          {DOCUMENT_DESCRIPTIONS[docType]}
                        </p>
                      </div>
                      
                      <div className="space-y-2">
                        <button
                          onClick={() => fileInputRefs.current[docType]?.click()}
                          className="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                        >
                          <FileText className="w-4 h-4 inline mr-2" />
                          Choose File
                        </button>
                        
                        <button
                          onClick={() => fileInputRefs.current[docType]?.click()}
                          className="w-full px-4 py-2 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-50 transition-colors"
                        >
                          <Camera className="w-4 h-4 inline mr-2" />
                          Take Photo
                        </button>
                      </div>
                      
                      <p className="text-xs text-gray-500">
                        Drag & drop or click to upload<br />
                        Supports: JPG, PNG, PDF (max 10MB)
                      </p>
                    </div>
                  )}
                </div>
              </div>
            )
          })}
        </div>

        {/* Tips */}
        <div className="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h4 className="font-medium text-blue-900 mb-2">üìù Document Tips</h4>
          <ul className="text-sm text-blue-800 space-y-1">
            <li>‚Ä¢ Ensure documents are clear and all text is readable</li>
            <li>‚Ä¢ Photos should be in color with good lighting</li>
            <li>‚Ä¢ Bank statements must be recent (within 3 months)</li>
            <li>‚Ä¢ All documents should be in high resolution</li>
            <li>‚Ä¢ Upload official documents only - no screenshots</li>
          </ul>
        </div>

        {/* Complete button */}
        {allRequiredUploaded && (
          <div className="mt-6 text-center">
            <button
              onClick={onComplete}
              className="px-8 py-3 bg-green-500 text-white text-lg font-medium rounded-lg hover:bg-green-600 transition-colors"
            >
              <CheckCircle2 className="w-5 h-5 inline mr-2" />
              All Documents Verified - Continue
            </button>
          </div>
        )}

        {/* Status summary */}
        <div className="mt-6 bg-gray-50 rounded-lg p-4">
          <h4 className="font-medium text-gray-800 mb-3">Upload Status</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
            {requiredDocs.map(docType => {
              const document = getDocumentForType(docType)
              const uploading = isUploading(docType)
              
              return (
                <div key={docType} className="flex items-center justify-between py-2">
                  <span className="text-sm text-gray-700">{DOCUMENT_NAMES[docType]}</span>
                  <div className="flex items-center gap-2">
                    {uploading ? (
                      <>
                        <div className="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                        <span className="text-xs text-blue-600">Processing...</span>
                      </>
                    ) : document?.verified ? (
                      <>
                        <CheckCircle2 className="w-4 h-4 text-green-500" />
                        <span className="text-xs text-green-600">Verified</span>
                      </>
                    ) : document ? (
                      <>
                        <AlertCircle className="w-4 h-4 text-red-500" />
                        <span className="text-xs text-red-600">Failed</span>
                      </>
                    ) : (
                      <>
                        <div className="w-4 h-4 border-2 border-gray-300 rounded-full"></div>
                        <span className="text-xs text-gray-500">Pending</span>
                      </>
                    )}
                  </div>
                </div>
              )
            })}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="DynamicForm.tsx">
'use client'

import { useState, useEffect } from 'react'
import { ChevronLeft, ChevronRight, Save, Send, AlertCircle, CheckCircle2 } from 'lucide-react'
import { Question, VisaType } from '@/types'
import { api } from '@/utils/api'

interface DynamicFormProps {
  visaType: VisaType
  onSubmit?: (answers: Record<string, any>) => void
  onBack?: () => void
}

export default function DynamicForm({ visaType, onSubmit, onBack }: DynamicFormProps) {
  const [questions, setQuestions] = useState<Question[]>([])
  const [answers, setAnswers] = useState<Record<string, any>>({})
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)
  const [errors, setErrors] = useState<Record<string, string>>({})
  const [isLoading, setIsLoading] = useState(true)
  const [isSaving, setIsSaving] = useState(false)

  // Load questions when visa type changes
  useEffect(() => {
    loadQuestions()
  }, [visaType])

  // Auto-save answers
  useEffect(() => {
    if (Object.keys(answers).length > 0) {
      autoSave()
    }
  }, [answers])

  const loadQuestions = async () => {
    setIsLoading(true)
    try {
      const loadedQuestions = await api.getFormQuestions(visaType, answers)
      setQuestions(loadedQuestions)
    } catch (error) {
      console.error('Error loading questions:', error)
    } finally {
      setIsLoading(false)
    }
  }

  const autoSave = async () => {
    setIsSaving(true)
    // Simulate auto-save
    setTimeout(() => setIsSaving(false), 500)
  }

  const validateAnswer = (question: Question, value: any): string | null => {
    if (question.required && (!value || value.toString().trim() === '')) {
      return 'This field is required'
    }

    if (question.validation) {
      if (question.type === 'number') {
        const numValue = parseFloat(value)
        if (question.validation.min && numValue < question.validation.min) {
          return question.validation.message || `Minimum value is ${question.validation.min}`
        }
        if (question.validation.max && numValue > question.validation.max) {
          return question.validation.message || `Maximum value is ${question.validation.max}`
        }
      }

      if (question.validation.pattern) {
        const regex = new RegExp(question.validation.pattern)
        if (!regex.test(value.toString())) {
          return question.validation.message || 'Invalid format'
        }
      }
    }

    return null
  }

  const handleAnswer = (questionId: string, value: any) => {
    const question = questions.find(q => q.id === questionId)
    if (!question) return

    // Validate the answer
    const error = validateAnswer(question, value)
    
    setErrors(prev => ({
      ...prev,
      [questionId]: error || ''
    }))

    setAnswers(prev => ({
      ...prev,
      [questionId]: value
    }))
  }

  const currentQuestion = questions[currentQuestionIndex]
  const progress = questions.length > 0 ? ((currentQuestionIndex + 1) / questions.length) * 100 : 0
  const canProceed = currentQuestion && answers[currentQuestion.id] && !errors[currentQuestion.id]
  const isLastQuestion = currentQuestionIndex === questions.length - 1

  const goToNext = () => {
    if (canProceed && !isLastQuestion) {
      setCurrentQuestionIndex(prev => prev + 1)
    }
  }

  const goToPrevious = () => {
    if (currentQuestionIndex > 0) {
      setCurrentQuestionIndex(prev => prev - 1)
    }
  }

  const handleSubmit = () => {
    if (onSubmit) {
      onSubmit(answers)
    }
  }

  const getVisaTypeTitle = (type: VisaType): string => {
    const titles = {
      tourist: 'Tourist Visa Application',
      business: 'Business Visa Application',
      student: 'Student Visa Application',
      work: 'Work Visa Application',
      family_visit: 'Family Visit Visa Application',
      transit: 'Transit Visa Application'
    }
    return titles[type] || 'Visa Application'
  }

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading your personalized form...</p>
        </div>
      </div>
    )
  }

  if (!currentQuestion) {
    return (
      <div className="text-center p-8">
        <AlertCircle className="w-12 h-12 text-yellow-500 mx-auto mb-4" />
        <h3 className="text-lg font-semibold text-gray-800 mb-2">No questions available</h3>
        <p className="text-gray-600">Please try again or contact support.</p>
      </div>
    )
  }

  return (
    <div className="max-w-2xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
      {/* Header */}
      <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
        <div className="flex items-center justify-between">
          <div>
            <h2 className="text-xl font-bold">{getVisaTypeTitle(visaType)}</h2>
            <p className="text-blue-100 text-sm mt-1">
              Question {currentQuestionIndex + 1} of {questions.length}
            </p>
          </div>
          <div className="flex items-center gap-2 text-sm">
            {isSaving && (
              <>
                <Save className="w-4 h-4 animate-pulse" />
                <span>Saving...</span>
              </>
            )}
          </div>
        </div>

        {/* Progress bar */}
        <div className="mt-4">
          <div className="flex justify-between text-sm text-blue-100 mb-2">
            <span>Progress</span>
            <span>{Math.round(progress)}% complete</span>
          </div>
          <div className="w-full bg-blue-500 bg-opacity-30 rounded-full h-2">
            <div 
              className="bg-white h-2 rounded-full transition-all duration-500 ease-out"
              style={{ width: `${progress}%` }}
            />
          </div>
        </div>
      </div>

      {/* Question content */}
      <div className="p-6">
        <div className="mb-6">
          <h3 className="text-lg font-semibold text-gray-800 mb-4">
            {currentQuestion.text}
          </h3>

          {/* Answer input based on question type */}
          <div className="space-y-4">
            {currentQuestion.type === 'text' && (
              <div>
                <input
                  type="text"
                  value={answers[currentQuestion.id] || ''}
                  onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                    errors[currentQuestion.id] ? 'border-red-500' : 'border-gray-300'
                  }`}
                  placeholder="Enter your answer..."
                />
                {errors[currentQuestion.id] && (
                  <p className="text-red-500 text-sm mt-2 flex items-center gap-2">
                    <AlertCircle className="w-4 h-4" />
                    {errors[currentQuestion.id]}
                  </p>
                )}
              </div>
            )}

            {currentQuestion.type === 'select' && (
              <div className="grid gap-3">
                {currentQuestion.options?.map(option => (
                  <button
                    key={option}
                    onClick={() => handleAnswer(currentQuestion.id, option)}
                    className={`p-4 text-left border rounded-lg transition-all ${
                      answers[currentQuestion.id] === option
                        ? 'border-blue-500 bg-blue-50 text-blue-700'
                        : 'border-gray-300 hover:border-blue-300 hover:bg-blue-50'
                    }`}
                  >
                    <div className="flex items-center justify-between">
                      <span>{option}</span>
                      {answers[currentQuestion.id] === option && (
                        <CheckCircle2 className="w-5 h-5 text-blue-500" />
                      )}
                    </div>
                  </button>
                ))}
              </div>
            )}

            {currentQuestion.type === 'number' && (
              <div>
                <input
                  type="number"
                  value={answers[currentQuestion.id] || ''}
                  onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                  min={currentQuestion.validation?.min}
                  max={currentQuestion.validation?.max}
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                    errors[currentQuestion.id] ? 'border-red-500' : 'border-gray-300'
                  }`}
                  placeholder="Enter number..."
                />
                {currentQuestion.validation && (
                  <p className="text-gray-500 text-sm mt-2">
                    {currentQuestion.validation.min && currentQuestion.validation.max
                      ? `Enter a number between ${currentQuestion.validation.min} and ${currentQuestion.validation.max}`
                      : currentQuestion.validation.min
                      ? `Minimum: ${currentQuestion.validation.min}`
                      : currentQuestion.validation.max
                      ? `Maximum: ${currentQuestion.validation.max}`
                      : ''
                    }
                  </p>
                )}
                {errors[currentQuestion.id] && (
                  <p className="text-red-500 text-sm mt-2 flex items-center gap-2">
                    <AlertCircle className="w-4 h-4" />
                    {errors[currentQuestion.id]}
                  </p>
                )}
              </div>
            )}

            {currentQuestion.type === 'date' && (
              <div>
                <input
                  type="date"
                  value={answers[currentQuestion.id] || ''}
                  onChange={(e) => handleAnswer(currentQuestion.id, e.target.value)}
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                    errors[currentQuestion.id] ? 'border-red-500' : 'border-gray-300'
                  }`}
                />
                {errors[currentQuestion.id] && (
                  <p className="text-red-500 text-sm mt-2 flex items-center gap-2">
                    <AlertCircle className="w-4 h-4" />
                    {errors[currentQuestion.id]}
                  </p>
                )}
              </div>
            )}
          </div>
        </div>

        {/* Navigation */}
        <div className="flex justify-between items-center pt-6 border-t">
          <button
            onClick={onBack || goToPrevious}
            className="flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"
            disabled={currentQuestionIndex === 0 && !onBack}
          >
            <ChevronLeft className="w-4 h-4" />
            {currentQuestionIndex === 0 && onBack ? 'Back to Chat' : 'Previous'}
          </button>

          <div className="flex gap-3">
            {!isLastQuestion ? (
              <button
                onClick={goToNext}
                disabled={!canProceed}
                className="flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              >
                Next
                <ChevronRight className="w-4 h-4" />
              </button>
            ) : (
              <button
                onClick={handleSubmit}
                disabled={!canProceed}
                className="flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              >
                <Send className="w-4 h-4" />
                Submit Application
              </button>
            )}
          </div>
        </div>
      </div>

      {/* Form summary sidebar (for larger screens) */}
      <div className="hidden lg:block fixed right-4 top-24 w-64 bg-white rounded-lg shadow-lg p-4 max-h-96 overflow-y-auto">
        <h4 className="font-semibold text-gray-800 mb-3">Your Answers</h4>
        <div className="space-y-2">
          {questions.slice(0, currentQuestionIndex + 1).map((q, index) => (
            <div key={q.id} className="text-sm">
              <p className="text-gray-600 font-medium">{q.text}</p>
              <p className="text-gray-800">{answers[q.id] || 'Not answered'}</p>
              {index < currentQuestionIndex && (
                <div className="w-full h-px bg-gray-200 my-2" />
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="index.tsx">
import React from 'react'

// Button Component
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline' | 'success' | 'warning' | 'error'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  loading?: boolean
  children: React.ReactNode
}

export const Button: React.FC<ButtonProps> = ({ 
  variant = 'primary',
  size = 'md',
  loading = false,
  children,
  className = '',
  disabled,
  ...props
}) => {
  const baseClasses = 'btn'
  const variantClasses = {
    primary: 'btn-primary',
    secondary: 'btn-secondary',
    accent: 'btn-accent',
    ghost: 'btn-ghost',
    outline: 'btn-outline',
    success: 'btn-success',
    warning: 'btn-warning',
    error: 'btn-error'
  }
  
  const sizeClasses = {
    xs: 'btn-xs',
    sm: 'btn-sm',
    md: '',
    lg: 'btn-lg'
  }

  const buttonClasses = [
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <button 
      className={buttonClasses}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="loading loading-spinner loading-sm mr-2"></span>}
      {children}
    </button>
  )
}

// Card Component
interface CardProps {
  children: React.ReactNode
  className?: string
  title?: string
  compact?: boolean
  bordered?: boolean
}

export const Card: React.FC<CardProps> = ({ 
  children, 
  className = '', 
  title, 
  compact = false,
  bordered = false 
}) => {
  const cardClasses = [
    'card',
    'bg-base-100',
    'shadow-lg',
    bordered ? 'card-bordered' : '',
    compact ? 'card-compact' : '',
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={cardClasses}>
      <div className="card-body">
        {title && <h3 className="card-title">{title}</h3>}
        {children}
      </div>
    </div>
  )
}

// Loading Spinner Component
interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg'
  className?: string
}

export const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'loading-sm',
    md: 'loading-md', 
    lg: 'loading-lg'
  }

  return (
    <div className={`flex justify-center items-center ${className}`}>
      <span className={`loading loading-spinner ${sizeClasses[size]}`}></span>
    </div>
  )
}

// Loading Overlay Component
interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
  children: React.ReactNode
}

export const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ 
  isLoading, 
  message = 'Loading...', 
  children 
}) => {
  return (
    <div className="relative">
      {children}
      {isLoading && (
        <div className="loading-overlay">
          <LoadingSpinner size="lg" />
          <p className="mt-4 text-lg">{message}</p>
        </div>
      )}
    </div>
  )
}

// Stats Components
interface StatProps {
  title: string
  value: string | number
  description?: string
  className?: string
}

export const Stat: React.FC<StatProps> = ({ title, value, description, className = '' }) => {
  return (
    <div className={`stat ${className}`}>
      <div className="stat-title">{title}</div>
      <div className="stat-value">{value}</div>
      {description && <div className="stat-desc">{description}</div>}
    </div>
  )
}

interface StatsProps {
  children: React.ReactNode
  className?: string
  vertical?: boolean
}

export const Stats: React.FC<StatsProps> = ({ children, className = '', vertical = false }) => {
  const statsClass = vertical 
    ? 'stats stats-vertical shadow bg-base-200' 
    : 'stats stats-vertical lg:stats-horizontal shadow bg-base-200'

  return (
    <div className={`${statsClass} ${className}`}>
      {children}
    </div>
  )
}

// Badge Component
interface BadgeProps {
  children: React.ReactNode
  variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'success' | 'warning' | 'error' | 'info'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  className?: string
}

export const Badge: React.FC<BadgeProps> = ({ 
  children, 
  variant = 'primary', 
  size = 'md',
  className = ''
}) => {
  const variantClasses = {
    primary: 'badge-primary',
    secondary: 'badge-secondary',
    accent: 'badge-accent',
    ghost: 'badge-ghost',
    success: 'badge-success',
    warning: 'badge-warning',
    error: 'badge-error',
    info: 'badge-info'
  }
  
  const sizeClasses = {
    xs: 'badge-xs',
    sm: 'badge-sm',
    md: '',
    lg: 'badge-lg'
  }

  const badgeClasses = [
    'badge',
    variantClasses[variant],
    sizeClasses[size],
    className
  ].filter(Boolean).join(' ')

  return (
    <div className={badgeClasses}>
      {children}
    </div>
  )
}
</file>

<file path="LoadingStates.tsx">
'use client'

import { Loader2, Bot, FileText, Upload, CheckCircle2 } from 'lucide-react'

// Generic loading spinner
export function LoadingSpinner({ size = 'md', className = '' }: { 
  size?: 'sm' | 'md' | 'lg', 
  className?: string 
}) {
  const sizeClasses = {
    sm: 'w-4 h-4',
    md: 'w-8 h-8',
    lg: 'w-12 h-12'
  }

  return (
    <Loader2 
      className={`animate-spin ${sizeClasses[size]} ${className}`} 
    />
  )
}

// Loading skeleton for text
export function TextSkeleton({ lines = 3, className = '' }: { 
  lines?: number, 
  className?: string 
}) {
  return (
    <div className={`space-y-2 ${className}`}>
      {Array.from({ length: lines }).map((_, i) => (
        <div
          key={i}
          className={`h-4 bg-gray-200 rounded animate-pulse ${
            i === lines - 1 ? 'w-3/4' : 'w-full'
          }`}
        />
      ))}
    </div>
  )
}

// Loading card skeleton
export function CardSkeleton({ className = '' }: { className?: string }) {
  return (
    <div className={`bg-white rounded-lg shadow p-6 ${className}`}>
      <div className="space-y-4">
        <div className="h-6 bg-gray-200 rounded w-1/3 animate-pulse" />
        <div className="space-y-2">
          <div className="h-4 bg-gray-200 rounded animate-pulse" />
          <div className="h-4 bg-gray-200 rounded w-5/6 animate-pulse" />
        </div>
        <div className="flex space-x-2">
          <div className="h-8 bg-gray-200 rounded w-20 animate-pulse" />
          <div className="h-8 bg-gray-200 rounded w-16 animate-pulse" />
        </div>
      </div>
    </div>
  )
}

// Chat loading animation
export function ChatLoading() {
  return (
    <div className="flex gap-3 justify-start">
      <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
        <Bot className="w-5 h-5 text-white" />
      </div>
      <div className="bg-white px-4 py-3 rounded-2xl rounded-bl-sm shadow-sm border">
        <div className="flex gap-1">
          <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" />
          <div 
            className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" 
            style={{ animationDelay: '0.1s' }} 
          />
          <div 
            className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" 
            style={{ animationDelay: '0.2s' }} 
          />
        </div>
      </div>
    </div>
  )
}

// Form loading overlay
export function FormLoading({ message = 'Loading...' }: { message?: string }) {
  return (
    <div className="absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg">
      <div className="text-center">
        <LoadingSpinner size="lg" className="text-blue-500 mx-auto mb-4" />
        <p className="text-gray-600 font-medium">{message}</p>
      </div>
    </div>
  )
}

// Document upload loading
export function DocumentLoading({ fileName }: { fileName: string }) {
  return (
    <div className="space-y-3">
      <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto" />
      <div className="text-center">
        <p className="text-blue-600 font-medium">Uploading & Verifying...</p>
        <p className="text-sm text-gray-600">{fileName}</p>
      </div>
      <div className="w-full bg-gray-200 rounded-full h-2">
        <div className="bg-blue-500 h-2 rounded-full animate-pulse w-3/4" />
      </div>
    </div>
  )
}

// Progress loading with steps
export function StepLoading({ 
  steps, 
  currentStep 
}: { 
  steps: string[], 
  currentStep: number 
}) {
  return (
    <div className="space-y-4">
      <div className="text-center">
        <LoadingSpinner size="lg" className="text-blue-500 mx-auto mb-4" />
        <p className="text-lg font-medium text-gray-800">Processing...</p>
      </div>
      
      <div className="space-y-2">
        {steps.map((step, index) => (
          <div
            key={index}
            className={`flex items-center gap-3 p-2 rounded ${
              index < currentStep
                ? 'text-green-600'
                : index === currentStep
                ? 'text-blue-600 bg-blue-50'
                : 'text-gray-400'
            }`}
          >
            {index < currentStep ? (
              <CheckCircle2 className="w-5 h-5" />
            ) : index === currentStep ? (
              <LoadingSpinner size="sm" />
            ) : (
              <div className="w-5 h-5 border-2 border-gray-300 rounded-full" />
            )}
            <span className="text-sm">{step}</span>
          </div>
        ))}
      </div>
    </div>
  )
}

// Page loading screen
export function PageLoading({ message = 'Loading...' }: { message?: string }) {
  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center">
      <div className="text-center">
        <div className="relative">
          <div className="w-20 h-20 border-4 border-blue-200 rounded-full animate-spin" />
          <div className="absolute inset-0 w-20 h-20 border-4 border-transparent border-t-blue-500 rounded-full animate-spin" />
        </div>
        <h2 className="text-2xl font-bold text-gray-800 mt-6 mb-2">VisaVerge</h2>
        <p className="text-gray-600">{message}</p>
      </div>
    </div>
  )
}

// Application submission loading
export function SubmissionLoading() {
  const steps = [
    'Validating your information',
    'Uploading documents',
    'Running security checks',
    'Generating application ID',
    'Submitting to embassy'
  ]

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg p-8 max-w-md w-full mx-4">
        <div className="text-center mb-6">
          <div className="w-16 h-16 border-4 border-blue-200 rounded-full animate-spin mx-auto mb-4">
            <div className="w-16 h-16 border-4 border-transparent border-t-blue-500 rounded-full animate-spin" />
          </div>
          <h3 className="text-xl font-bold text-gray-800">Submitting Application</h3>
          <p className="text-gray-600 text-sm mt-2">This may take a few moments...</p>
        </div>

        <div className="space-y-3">
          {steps.map((step, index) => (
            <div key={index} className="flex items-center gap-3">
              <div className="w-6 h-6 flex items-center justify-center">
                {index < 2 ? (
                  <CheckCircle2 className="w-5 h-5 text-green-500" />
                ) : index === 2 ? (
                  <LoadingSpinner size="sm" className="text-blue-500" />
                ) : (
                  <div className="w-3 h-3 border-2 border-gray-300 rounded-full" />
                )}
              </div>
              <span className={`text-sm ${
                index < 2 ? 'text-green-600' : 
                index === 2 ? 'text-blue-600' : 
                'text-gray-400'
              }`}>
                {step}
              </span>
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="Notification.tsx">
'use client'

import { useState, useEffect, createContext, useContext, ReactNode } from 'react'
import { CheckCircle2, AlertCircle, Info, X, AlertTriangle } from 'lucide-react'

type NotificationType = 'success' | 'error' | 'warning' | 'info'

interface Notification {
  id: string
  type: NotificationType
  title: string
  message?: string
  duration?: number
  action?: {
    label: string
    onClick: () => void
  }
}

interface NotificationContextType {
  notifications: Notification[]
  addNotification: (notification: Omit<Notification, 'id'>) => void
  removeNotification: (id: string) => void
  clearAll: () => void
}

const NotificationContext = createContext<NotificationContextType | undefined>(undefined)

export function NotificationProvider({ children }: { children: ReactNode }) {
  const [notifications, setNotifications] = useState<Notification[]>([])

  const addNotification = (notification: Omit<Notification, 'id'>) => {
    const id = Math.random().toString(36).substr(2, 9)
    const newNotification = { ...notification, id }
    
    setNotifications(prev => [...prev, newNotification])

    // Auto remove after duration (default 5 seconds)
    const duration = notification.duration ?? 5000
    if (duration > 0) {
      setTimeout(() => {
        removeNotification(id)
      }, duration)
    }
  }

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id))
  }

  const clearAll = () => {
    setNotifications([])
  }

  return (
    <NotificationContext.Provider value={{
      notifications,
      addNotification,
      removeNotification,
      clearAll
    }}>
      {children}
      <NotificationContainer />
    </NotificationContext.Provider>
  )
}

export function useNotifications() {
  const context = useContext(NotificationContext)
  if (!context) {
    throw new Error('useNotifications must be used within NotificationProvider')
  }
  return context
}

function NotificationContainer() {
  const { notifications } = useNotifications()

  return (
    <div className="fixed top-4 right-4 z-50 space-y-3 max-w-sm">
      {notifications.map(notification => (
        <NotificationItem key={notification.id} notification={notification} />
      ))}
    </div>
  )
}

function NotificationItem({ notification }: { notification: Notification }) {
  const { removeNotification } = useNotifications()
  const [isVisible, setIsVisible] = useState(false)

  useEffect(() => {
    // Trigger entrance animation
    setTimeout(() => setIsVisible(true), 50)
  }, [])

  const handleClose = () => {
    setIsVisible(false)
    setTimeout(() => removeNotification(notification.id), 300)
  }

  const getIcon = () => {
    switch (notification.type) {
      case 'success':
        return <CheckCircle2 className="w-5 h-5 text-green-500" />
      case 'error':
        return <AlertCircle className="w-5 h-5 text-red-500" />
      case 'warning':
        return <AlertTriangle className="w-5 h-5 text-yellow-500" />
      case 'info':
        return <Info className="w-5 h-5 text-blue-500" />
    }
  }

  const getBorderColor = () => {
    switch (notification.type) {
      case 'success':
        return 'border-l-green-500'
      case 'error':
        return 'border-l-red-500'
      case 'warning':
        return 'border-l-yellow-500'
      case 'info':
        return 'border-l-blue-500'
    }
  }

  return (
    <div
      className={`
        transform transition-all duration-300 ease-in-out
        ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}
        bg-white border-l-4 ${getBorderColor()} shadow-lg rounded-lg p-4 min-w-80
      `}
    >
      <div className="flex items-start gap-3">
        <div className="flex-shrink-0 pt-0.5">
          {getIcon()}
        </div>
        
        <div className="flex-1 min-w-0">
          <h4 className="text-sm font-semibold text-gray-900">
            {notification.title}
          </h4>
          {notification.message && (
            <p className="text-sm text-gray-600 mt-1">
              {notification.message}
            </p>
          )}
          {notification.action && (
            <button
              onClick={notification.action.onClick}
              className="text-sm text-blue-600 hover:text-blue-800 font-medium mt-2 underline"
            >
              {notification.action.label}
            </button>
          )}
        </div>

        <button
          onClick={handleClose}
          className="flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors"
        >
          <X className="w-4 h-4" />
        </button>
      </div>
    </div>
  )
}

// Convenience hooks for different notification types
export function useSuccessNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'success', title, message })
  }
}

export function useErrorNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'error', title, message })
  }
}

export function useWarningNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'warning', title, message })
  }
}

export function useInfoNotification() {
  const { addNotification } = useNotifications()
  
  return (title: string, message?: string) => {
    addNotification({ type: 'info', title, message })
  }
}

// Alert component for inline notifications
export function Alert({ 
  type, 
  title, 
  message, 
  onClose,
  className = ''
}: {
  type: NotificationType
  title: string
  message?: string
  onClose?: () => void
  className?: string
}) {
  const getIcon = () => {
    switch (type) {
      case 'success':
        return <CheckCircle2 className="w-5 h-5 text-green-500" />
      case 'error':
        return <AlertCircle className="w-5 h-5 text-red-500" />
      case 'warning':
        return <AlertTriangle className="w-5 h-5 text-yellow-500" />
      case 'info':
        return <Info className="w-5 h-5 text-blue-500" />
    }
  }

  const getBgColor = () => {
    switch (type) {
      case 'success':
        return 'bg-green-50 border-green-200'
      case 'error':
        return 'bg-red-50 border-red-200'
      case 'warning':
        return 'bg-yellow-50 border-yellow-200'
      case 'info':
        return 'bg-blue-50 border-blue-200'
    }
  }

  return (
    <div className={`border rounded-lg p-4 ${getBgColor()} ${className}`}>
      <div className="flex items-start gap-3">
        <div className="flex-shrink-0 pt-0.5">
          {getIcon()}
        </div>
        
        <div className="flex-1 min-w-0">
          <h4 className="text-sm font-semibold text-gray-900">
            {title}
          </h4>
          {message && (
            <p className="text-sm text-gray-600 mt-1">
              {message}
            </p>
          )}
        </div>

        {onClose && (
          <button
            onClick={onClose}
            className="flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors"
          >
            <X className="w-4 h-4" />
          </button>
        )}
      </div>
    </div>
  )
}

// Banner component for important site-wide notifications
export function Banner({ 
  type, 
  message, 
  action,
  onClose 
}: {
  type: NotificationType
  message: string
  action?: {
    label: string
    onClick: () => void
  }
  onClose?: () => void
}) {
  const getBgColor = () => {
    switch (type) {
      case 'success':
        return 'bg-green-600'
      case 'error':
        return 'bg-red-600'
      case 'warning':
        return 'bg-yellow-600'
      case 'info':
        return 'bg-blue-600'
    }
  }

  return (
    <div className={`${getBgColor()} text-white`}>
      <div className="max-w-7xl mx-auto py-3 px-4">
        <div className="flex items-center justify-between flex-wrap">
          <div className="flex items-center gap-3">
            <div className="flex-shrink-0">
              {type === 'success' && <CheckCircle2 className="w-5 h-5" />}
              {type === 'error' && <AlertCircle className="w-5 h-5" />}
              {type === 'warning' && <AlertTriangle className="w-5 h-5" />}
              {type === 'info' && <Info className="w-5 h-5" />}
            </div>
            <p className="text-sm font-medium">{message}</p>
          </div>
          
          <div className="flex items-center gap-3">
            {action && (
              <button
                onClick={action.onClick}
                className="text-sm underline hover:no-underline font-medium"
              >
                {action.label}
              </button>
            )}
            {onClose && (
              <button
                onClick={onClose}
                className="text-white hover:text-gray-200 transition-colors"
              >
                <X className="w-5 h-5" />
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="StatusTracker.tsx">
'use client'

import { useState, useEffect } from 'react'
import { CheckCircle2, Clock, AlertCircle, FileText, Shield, Eye, Award } from 'lucide-react'
import { VisaApplication, ApplicationStatus } from '@/types'
import { api } from '@/utils/api'

interface StatusTrackerProps {
  applicationId: string
  onNewApplication?: () => void
}

interface StatusStep {
  status: ApplicationStatus
  title: string
  description: string
  icon: React.ReactNode
  estimatedDays?: number
  completed: boolean
  current: boolean
  timestamp?: Date
}

export default function StatusTracker({ applicationId, onNewApplication }: StatusTrackerProps) {
  const [application, setApplication] = useState<VisaApplication | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [lastUpdate, setLastUpdate] = useState<Date>(new Date())

  useEffect(() => {
    loadApplicationStatus()
    
    // Poll for updates every 30 seconds for demo
    const interval = setInterval(loadApplicationStatus, 30000)
    return () => clearInterval(interval)
  }, [applicationId])

  const loadApplicationStatus = async () => {
    try {
      const data = await api.getApplicationStatus(applicationId)
      setApplication(data)
      setLastUpdate(new Date())
    } catch (error) {
      console.error('Error loading application status:', error)
    } finally {
      setIsLoading(false)
    }
  }

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading application status...</p>
        </div>
      </div>
    )
  }

  if (!application) {
    return (
      <div className="text-center p-8">
        <AlertCircle className="w-12 h-12 text-red-500 mx-auto mb-4" />
        <h3 className="text-lg font-semibold text-gray-800 mb-2">Application not found</h3>
        <p className="text-gray-600 mb-4">Unable to load application status.</p>
        <button
          onClick={onNewApplication}
          className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
        >
          Start New Application
        </button>
      </div>
    )
  }

  // Define status steps
  const statusSteps: StatusStep[] = [
    {
      status: 'submitted',
      title: 'Application Submitted',
      description: 'Your application has been received and is in the queue for processing',
      icon: <FileText className="w-6 h-6" />,
      completed: ['submitted', 'document_review', 'background_check', 'officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'submitted'
    },
    {
      status: 'document_review',
      title: 'Document Review',
      description: 'Our team is verifying your documents and checking for completeness',
      icon: <Eye className="w-6 h-6" />,
      estimatedDays: 2,
      completed: ['document_review', 'background_check', 'officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'document_review'
    },
    {
      status: 'background_check',
      title: 'Background Verification',
      description: 'Security and background checks are being conducted',
      icon: <Shield className="w-6 h-6" />,
      estimatedDays: 5,
      completed: ['background_check', 'officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'background_check'
    },
    {
      status: 'officer_review',
      title: 'Officer Review',
      description: 'A consular officer is reviewing your application for final decision',
      icon: <Eye className="w-6 h-6" />,
      estimatedDays: 3,
      completed: ['officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'officer_review'
    },
    {
      status: 'approved',
      title: 'Decision Made',
      description: application.status === 'approved' ? 'Congratulations! Your visa has been approved' : 'A decision has been made on your application',
      icon: application.status === 'approved' ? <Award className="w-6 h-6" /> : <AlertCircle className="w-6 h-6" />,
      completed: ['approved', 'rejected'].includes(application.status),
      current: ['approved', 'rejected'].includes(application.status)
    }
  ]

  const currentStep = statusSteps.find(step => step.current)
  const completedSteps = statusSteps.filter(step => step.completed).length
  const progress = (completedSteps / statusSteps.length) * 100

  const getStatusColor = (status: ApplicationStatus) => {
    switch (status) {
      case 'approved': return 'text-green-600'
      case 'rejected': return 'text-red-600'
      case 'requires_interview': return 'text-yellow-600'
      default: return 'text-blue-600'
    }
  }

  const getStatusBg = (status: ApplicationStatus) => {
    switch (status) {
      case 'approved': return 'bg-green-50 border-green-200'
      case 'rejected': return 'bg-red-50 border-red-200'
      case 'requires_interview': return 'bg-yellow-50 border-yellow-200'
      default: return 'bg-blue-50 border-blue-200'
    }
  }

  return (
    <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
      {/* Header */}
      <div className={`p-6 border-b ${getStatusBg(application.status)}`}>
        <div className="flex justify-between items-start">
          <div>
            <h2 className="text-2xl font-bold text-gray-800 mb-2">Application Status</h2>
            <p className="text-gray-600">Application ID: <span className="font-mono">{application.id}</span></p>
            <p className="text-gray-600">Visa Type: <span className="capitalize font-medium">{application.visaType}</span></p>
          </div>
          <div className="text-right">
            <p className={`text-lg font-semibold capitalize ${getStatusColor(application.status)}`}>
              {application.status.replace('_', ' ')}
            </p>
            <p className="text-sm text-gray-500">
              Last updated: {lastUpdate.toLocaleString()}
            </p>
          </div>
        </div>
      </div>

      {/* Progress Overview */}
      <div className="p-6 bg-gray-50 border-b">
        <div className="flex justify-between items-center mb-4">
          <h3 className="font-semibold text-gray-800">Processing Progress</h3>
          <span className="text-2xl font-bold text-blue-600">{Math.round(progress)}%</span>
        </div>
        
        <div className="w-full bg-gray-200 rounded-full h-3 mb-4">
          <div 
            className={`h-3 rounded-full transition-all duration-1000 ${
              application.status === 'approved' ? 'bg-green-500' :
              application.status === 'rejected' ? 'bg-red-500' : 'bg-blue-500'
            }`}
            style={{ width: `${progress}%` }}
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
          <div className="bg-white rounded-lg p-4">
            <p className="text-2xl font-bold text-blue-600">{completedSteps}</p>
            <p className="text-sm text-gray-600">Steps Completed</p>
          </div>
          {application.estimatedDecision && (
            <div className="bg-white rounded-lg p-4">
              <p className="text-2xl font-bold text-green-600">
                {Math.ceil((application.estimatedDecision.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))}
              </p>
              <p className="text-sm text-gray-600">Days Remaining</p>
            </div>
          )}
          {application.approvalProbability && (
            <div className="bg-white rounded-lg p-4">
              <p className="text-2xl font-bold text-green-600">{application.approvalProbability}%</p>
              <p className="text-sm text-gray-600">Approval Probability</p>
            </div>
          )}
        </div>
      </div>

      {/* Status Timeline */}
      <div className="p-6">
        <h3 className="font-semibold text-gray-800 mb-6">Application Timeline</h3>
        
        <div className="space-y-6">
          {statusSteps.map((step, index) => (
            <div key={step.status} className="flex gap-4">
              {/* Icon */}
              <div className={`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${
                step.completed 
                  ? application.status === 'approved' && step.status === 'approved'
                    ? 'bg-green-500 text-white'
                    : application.status === 'rejected' && step.status === 'approved'
                    ? 'bg-red-500 text-white'
                    : 'bg-blue-500 text-white'
                  : step.current
                  ? 'bg-blue-100 text-blue-600 border-2 border-blue-500'
                  : 'bg-gray-100 text-gray-400'
              }`}>
                {step.completed ? (
                  application.status === 'rejected' && step.status === 'approved' ? (
                    <AlertCircle className="w-6 h-6" />
                  ) : (
                    <CheckCircle2 className="w-6 h-6" />
                  )
                ) : step.current ? (
                  <Clock className="w-6 h-6 animate-pulse" />
                ) : (
                  step.icon
                )}
              </div>

              {/* Content */}
              <div className="flex-1 pb-6">
                <div className="flex justify-between items-start mb-2">
                  <h4 className={`font-medium ${
                    step.completed || step.current ? 'text-gray-800' : 'text-gray-500'
                  }`}>
                    {step.title}
                  </h4>
                  {step.current && step.estimatedDays && (
                    <span className="text-sm text-blue-600 font-medium">
                      ~{step.estimatedDays} days
                    </span>
                  )}
                </div>
                
                <p className={`text-sm ${
                  step.completed || step.current ? 'text-gray-600' : 'text-gray-400'
                }`}>
                  {step.description}
                </p>

                {step.completed && step.timestamp && (
                  <p className="text-xs text-green-600 mt-1">
                    Completed on {step.timestamp.toLocaleDateString()}
                  </p>
                )}

                {step.current && (
                  <div className="mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                    <p className="text-sm text-blue-800">
                      <strong>Current Status:</strong> This step is currently being processed. 
                      {step.estimatedDays && ` Expected completion in ${step.estimatedDays} days.`}
                    </p>
                  </div>
                )}
              </div>

              {/* Connecting line */}
              {index < statusSteps.length - 1 && (
                <div className="absolute left-[68px] mt-12 w-px h-6 bg-gray-300" />
              )}
            </div>
          ))}
        </div>
      </div>

      {/* Next Steps */}
      <div className="p-6 bg-gray-50 border-t">
        <h3 className="font-semibold text-gray-800 mb-3">What happens next?</h3>
        
        {application.status === 'approved' && (
          <div className="bg-green-50 border border-green-200 rounded-lg p-4">
            <p className="text-green-800">
              üéâ <strong>Congratulations!</strong> Your visa has been approved. You should receive your passport with the visa within 5-7 business days.
            </p>
          </div>
        )}

        {application.status === 'rejected' && (
          <div className="bg-red-50 border border-red-200 rounded-lg p-4">
            <p className="text-red-800">
              <strong>Application Decision:</strong> Unfortunately, your visa application was not approved. You will receive a detailed explanation letter shortly.
            </p>
          </div>
        )}

        {!['approved', 'rejected'].includes(application.status) && (
          <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p className="text-blue-800">
              <strong>No action required.</strong> We're processing your application and will notify you of any updates. 
              You can check this page anytime for the latest status.
            </p>
          </div>
        )}

        <div className="mt-4 flex gap-3">
          <button
            onClick={loadApplicationStatus}
            className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
          >
            Refresh Status
          </button>
          
          <button
            onClick={onNewApplication}
            className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
          >
            New Application
          </button>
        </div>
      </div>
    </div>
  )
}
</file>

</files>
</file>

<file path="components/StatusTracker.tsx">
'use client'

import { useState, useEffect } from 'react'
import { CheckCircle2, Clock, AlertCircle, FileText, Shield, Eye, Award } from 'lucide-react'
import { VisaApplication, ApplicationStatus } from '@/types'
import { api } from '@/utils/api'

interface StatusTrackerProps {
  applicationId: string
  onNewApplication?: () => void
}

interface StatusStep {
  status: ApplicationStatus
  title: string
  description: string
  icon: React.ReactNode
  estimatedDays?: number
  completed: boolean
  current: boolean
  timestamp?: Date
}

export default function StatusTracker({ applicationId, onNewApplication }: StatusTrackerProps) {
  const [application, setApplication] = useState<VisaApplication | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [lastUpdate, setLastUpdate] = useState<Date>(new Date())

  useEffect(() => {
    loadApplicationStatus()
    
    // Poll for updates every 30 seconds for demo
    const interval = setInterval(loadApplicationStatus, 30000)
    return () => clearInterval(interval)
  }, [applicationId])

  const loadApplicationStatus = async () => {
    try {
      const data = await api.getApplicationStatus(applicationId)
      setApplication(data)
      setLastUpdate(new Date())
    } catch (error) {
      console.error('Error loading application status:', error)
    } finally {
      setIsLoading(false)
    }
  }

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading application status...</p>
        </div>
      </div>
    )
  }

  if (!application) {
    return (
      <div className="text-center p-8">
        <AlertCircle className="w-12 h-12 text-red-500 mx-auto mb-4" />
        <h3 className="text-lg font-semibold text-gray-800 mb-2">Application not found</h3>
        <p className="text-gray-600 mb-4">Unable to load application status.</p>
        <button
          onClick={onNewApplication}
          className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
        >
          Start New Application
        </button>
      </div>
    )
  }

  // Define status steps
  const statusSteps: StatusStep[] = [
    {
      status: 'submitted',
      title: 'Application Submitted',
      description: 'Your application has been received and is in the queue for processing',
      icon: <FileText className="w-6 h-6" />,
      completed: ['submitted', 'document_review', 'background_check', 'officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'submitted'
    },
    {
      status: 'document_review',
      title: 'Document Review',
      description: 'Our team is verifying your documents and checking for completeness',
      icon: <Eye className="w-6 h-6" />,
      estimatedDays: 2,
      completed: ['document_review', 'background_check', 'officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'document_review'
    },
    {
      status: 'background_check',
      title: 'Background Verification',
      description: 'Security and background checks are being conducted',
      icon: <Shield className="w-6 h-6" />,
      estimatedDays: 5,
      completed: ['background_check', 'officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'background_check'
    },
    {
      status: 'officer_review',
      title: 'Officer Review',
      description: 'A consular officer is reviewing your application for final decision',
      icon: <Eye className="w-6 h-6" />,
      estimatedDays: 3,
      completed: ['officer_review', 'approved', 'rejected'].includes(application.status),
      current: application.status === 'officer_review'
    },
    {
      status: 'approved',
      title: 'Decision Made',
      description: application.status === 'approved' ? 'Congratulations! Your visa has been approved' : 'A decision has been made on your application',
      icon: application.status === 'approved' ? <Award className="w-6 h-6" /> : <AlertCircle className="w-6 h-6" />,
      completed: ['approved', 'rejected'].includes(application.status),
      current: ['approved', 'rejected'].includes(application.status)
    }
  ]

  const currentStep = statusSteps.find(step => step.current)
  const completedSteps = statusSteps.filter(step => step.completed).length
  const progress = (completedSteps / statusSteps.length) * 100

  const getStatusColor = (status: ApplicationStatus) => {
    switch (status) {
      case 'approved': return 'text-green-600'
      case 'rejected': return 'text-red-600'
      case 'requires_interview': return 'text-yellow-600'
      default: return 'text-blue-600'
    }
  }

  const getStatusBg = (status: ApplicationStatus) => {
    switch (status) {
      case 'approved': return 'bg-green-50 border-green-200'
      case 'rejected': return 'bg-red-50 border-red-200'
      case 'requires_interview': return 'bg-yellow-50 border-yellow-200'
      default: return 'bg-blue-50 border-blue-200'
    }
  }

  return (
    <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
      {/* Header */}
      <div className={`p-6 border-b ${getStatusBg(application.status)}`}>
        <div className="flex justify-between items-start">
          <div>
            <h2 className="text-2xl font-bold text-gray-800 mb-2">Application Status</h2>
            <p className="text-gray-600">Application ID: <span className="font-mono">{application.id}</span></p>
            <p className="text-gray-600">Visa Type: <span className="capitalize font-medium">{application.visaType}</span></p>
          </div>
          <div className="text-right">
            <p className={`text-lg font-semibold capitalize ${getStatusColor(application.status)}`}>
              {application.status.replace('_', ' ')}
            </p>
            <p className="text-sm text-gray-500">
              Last updated: {lastUpdate.toLocaleString()}
            </p>
          </div>
        </div>
      </div>

      {/* Progress Overview */}
      <div className="p-6 bg-gray-50 border-b">
        <div className="flex justify-between items-center mb-4">
          <h3 className="font-semibold text-gray-800">Processing Progress</h3>
          <span className="text-2xl font-bold text-blue-600">{Math.round(progress)}%</span>
        </div>
        
        <div className="w-full bg-gray-200 rounded-full h-3 mb-4">
          <div 
            className={`h-3 rounded-full transition-all duration-1000 ${
              application.status === 'approved' ? 'bg-green-500' :
              application.status === 'rejected' ? 'bg-red-500' : 'bg-blue-500'
            }`}
            style={{ width: `${progress}%` }}
          />
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
          <div className="bg-white rounded-lg p-4">
            <p className="text-2xl font-bold text-blue-600">{completedSteps}</p>
            <p className="text-sm text-gray-600">Steps Completed</p>
          </div>
          {application.estimatedDecision && (
            <div className="bg-white rounded-lg p-4">
              <p className="text-2xl font-bold text-green-600">
                {Math.ceil((application.estimatedDecision.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))}
              </p>
              <p className="text-sm text-gray-600">Days Remaining</p>
            </div>
          )}
          {application.approvalProbability && (
            <div className="bg-white rounded-lg p-4">
              <p className="text-2xl font-bold text-green-600">{application.approvalProbability}%</p>
              <p className="text-sm text-gray-600">Approval Probability</p>
            </div>
          )}
        </div>
      </div>

      {/* Status Timeline */}
      <div className="p-6">
        <h3 className="font-semibold text-gray-800 mb-6">Application Timeline</h3>
        
        <div className="space-y-6">
          {statusSteps.map((step, index) => (
            <div key={step.status} className="flex gap-4">
              {/* Icon */}
              <div className={`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${
                step.completed 
                  ? application.status === 'approved' && step.status === 'approved'
                    ? 'bg-green-500 text-white'
                    : application.status === 'rejected' && step.status === 'approved'
                    ? 'bg-red-500 text-white'
                    : 'bg-blue-500 text-white'
                  : step.current
                  ? 'bg-blue-100 text-blue-600 border-2 border-blue-500'
                  : 'bg-gray-100 text-gray-400'
              }`}>
                {step.completed ? (
                  application.status === 'rejected' && step.status === 'approved' ? (
                    <AlertCircle className="w-6 h-6" />
                  ) : (
                    <CheckCircle2 className="w-6 h-6" />
                  )
                ) : step.current ? (
                  <Clock className="w-6 h-6 animate-pulse" />
                ) : (
                  step.icon
                )}
              </div>

              {/* Content */}
              <div className="flex-1 pb-6">
                <div className="flex justify-between items-start mb-2">
                  <h4 className={`font-medium ${
                    step.completed || step.current ? 'text-gray-800' : 'text-gray-500'
                  }`}>
                    {step.title}
                  </h4>
                  {step.current && step.estimatedDays && (
                    <span className="text-sm text-blue-600 font-medium">
                      ~{step.estimatedDays} days
                    </span>
                  )}
                </div>
                
                <p className={`text-sm ${
                  step.completed || step.current ? 'text-gray-600' : 'text-gray-400'
                }`}>
                  {step.description}
                </p>

                {step.completed && step.timestamp && (
                  <p className="text-xs text-green-600 mt-1">
                    Completed on {step.timestamp.toLocaleDateString()}
                  </p>
                )}

                {step.current && (
                  <div className="mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                    <p className="text-sm text-blue-800">
                      <strong>Current Status:</strong> This step is currently being processed. 
                      {step.estimatedDays && ` Expected completion in ${step.estimatedDays} days.`}
                    </p>
                  </div>
                )}
              </div>

              {/* Connecting line */}
              {index < statusSteps.length - 1 && (
                <div className="absolute left-[68px] mt-12 w-px h-6 bg-gray-300" />
              )}
            </div>
          ))}
        </div>
      </div>

      {/* Next Steps */}
      <div className="p-6 bg-gray-50 border-t">
        <h3 className="font-semibold text-gray-800 mb-3">What happens next?</h3>
        
        {application.status === 'approved' && (
          <div className="bg-green-50 border border-green-200 rounded-lg p-4">
            <p className="text-green-800">
              üéâ <strong>Congratulations!</strong> Your visa has been approved. You should receive your passport with the visa within 5-7 business days.
            </p>
          </div>
        )}

        {application.status === 'rejected' && (
          <div className="bg-red-50 border border-red-200 rounded-lg p-4">
            <p className="text-red-800">
              <strong>Application Decision:</strong> Unfortunately, your visa application was not approved. You will receive a detailed explanation letter shortly.
            </p>
          </div>
        )}

        {!['approved', 'rejected'].includes(application.status) && (
          <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p className="text-blue-800">
              <strong>No action required.</strong> We're processing your application and will notify you of any updates. 
              You can check this page anytime for the latest status.
            </p>
          </div>
        )}

        <div className="mt-4 flex gap-3">
          <button
            onClick={loadApplicationStatus}
            className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
          >
            Refresh Status
          </button>
          
          <button
            onClick={onNewApplication}
            className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
          >
            New Application
          </button>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="lib/constants/theme.constants.ts">
export const THEMES = {
  LIGHT: 'cupcake',
  DARK: 'dracula',
} as const

export type Theme = typeof THEMES[keyof typeof THEMES]

export const DEFAULT_THEME = THEMES.LIGHT

export const THEME_STORAGE_KEY = 'theme'

export const THEME_OPTIONS = [
  { value: 'default', label: 'System Default' },
  { value: THEMES.LIGHT, label: 'Light' },
  { value: THEMES.DARK, label: 'Dark' },
] as const
</file>

<file path="lib/stores/alert.store.ts">
import { create } from 'zustand'

export type AlertType = 'success' | 'error' | 'warning' | 'info'

export interface Alert {
  id: string
  type: AlertType
  message: string
  duration?: number
}

interface AlertState {
  alerts: Alert[]
}

interface AlertActions {
  addAlert: (alert: Omit<Alert, 'id'>) => void
  removeAlert: (id: string) => void
  clearAlerts: () => void
  showSuccess: (message: string, duration?: number) => void
  showError: (message: string, duration?: number) => void
  showWarning: (message: string, duration?: number) => void
  showInfo: (message: string, duration?: number) => void
}

type AlertStore = AlertState & AlertActions

const generateId = () => Math.random().toString(36).substr(2, 9)

export const useAlertStore = create<AlertStore>((set, get) => ({
  alerts: [],

  addAlert: (alertData) => {
    const alert: Alert = {
      id: generateId(),
      ...alertData,
    }

    set((state) => ({
      alerts: [...state.alerts, alert],
    }))

    const duration = alert.duration || 5000
    if (duration > 0) {
      setTimeout(() => {
        get().removeAlert(alert.id)
      }, duration)
    }
  },

  removeAlert: (id) =>
    set((state) => ({
      alerts: state.alerts.filter((alert) => alert.id !== id),
    })),

  clearAlerts: () => set({ alerts: [] }),

  showSuccess: (message, duration) =>
    get().addAlert({ type: 'success', message, duration }),

  showError: (message, duration = 7000) =>
    get().addAlert({ type: 'error', message, duration }),

  showWarning: (message, duration) =>
    get().addAlert({ type: 'warning', message, duration }),

  showInfo: (message, duration) =>
    get().addAlert({ type: 'info', message, duration }),
}))
</file>

<file path="public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="types/index.ts">
// types/index.ts

export interface Message {
  id: string
  text: string
  sender: 'user' | 'ava'
  timestamp: Date
  metadata?: {
    suggestedVisaType?: string
    nextAction?: string
    confidence?: number
  }
}

export interface Question {
  id: string
  text: string
  type: 'text' | 'select' | 'number' | 'date' | 'file'
  options?: string[]
  required?: boolean
  validation?: {
    min?: number
    max?: number
    pattern?: string
    message?: string
  }
  dependsOn?: {
    questionId: string
    value: any
  }
}

export interface VisaApplication {
  id: string
  userId: string
  visaType: string
  status: ApplicationStatus
  answers: Record<string, any>
  documents: Document[]
  createdAt: Date
  updatedAt: Date
  submittedAt?: Date
  estimatedDecision?: Date
  approvalProbability?: number
}

export interface Document {
  id: string
  name: string
  type: DocumentType
  size: number
  uploadedAt: Date
  verified: boolean
  url?: string
}

export type ApplicationStatus = 
  | 'draft'
  | 'submitted' 
  | 'document_review'
  | 'background_check'
  | 'officer_review'
  | 'approved'
  | 'rejected'
  | 'requires_interview'

export type DocumentType = 
  | 'passport'
  | 'photo'
  | 'bank_statement'
  | 'invitation_letter'
  | 'travel_insurance'
  | 'employment_letter'
  | 'flight_itinerary'

export type VisaType = 
  | 'tourist'
  | 'business' 
  | 'student'
  | 'work'
  | 'family_visit'
  | 'transit'

export interface ChatResponse {
  response: string
  suggestedVisaType?: VisaType
  nextAction: 'continue_chat' | 'start_form' | 'upload_documents' | 'submit_application'
  confidence?: number
  followUpQuestions?: string[]
}
</file>

<file path="utils/api.ts">
// utils/api.ts

import { ChatResponse, Question, VisaApplication, VisaType } from '@/types'

const API_BASE = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000'

// Mock API responses for development (replace with real API calls later)
export const api = {
  // Chat with AVA
  async chat(message: string): Promise<ChatResponse> {
    // Simulate API delay
    await new Promise(resolve => setTimeout(resolve, 1000))
    
    const lowerMessage = message.toLowerCase()
    
    if (lowerMessage.includes('tourist') || lowerMessage.includes('vacation') || lowerMessage.includes('holiday')) {
      return {
        response: "Perfect! For a tourist visa, you'll typically need a passport, bank statements, travel insurance, and a travel itinerary. The process usually takes 5-10 business days. Would you like me to start your application?",
        suggestedVisaType: 'tourist',
        nextAction: 'start_form',
        confidence: 0.9,
        followUpQuestions: ["How long do you plan to stay?", "Which country are you visiting?"]
      }
    }
    
    if (lowerMessage.includes('business') || lowerMessage.includes('work') || lowerMessage.includes('conference')) {
      return {
        response: "Great! For a business visa, you'll need an invitation letter from the company, your employment details, and proof of business activities. This typically takes 7-15 business days. Shall we begin your application?",
        suggestedVisaType: 'business',
        nextAction: 'start_form',
        confidence: 0.85,
        followUpQuestions: ["Do you have an invitation letter?", "What type of business activities?"]
      }
    }
    
    if (lowerMessage.includes('student') || lowerMessage.includes('study') || lowerMessage.includes('university')) {
      return {
        response: "Excellent! For a student visa, you'll need an acceptance letter from your educational institution, proof of finances, and academic transcripts. Processing takes 15-30 business days. Ready to start?",
        suggestedVisaType: 'student',
        nextAction: 'start_form',
        confidence: 0.92
      }
    }
    
    if (lowerMessage.includes('family') || lowerMessage.includes('visit') || lowerMessage.includes('relative')) {
      return {
        response: "I understand you want to visit family! You'll need an invitation from your family member, proof of relationship, and financial documentation. Processing typically takes 10-20 business days. Let's get started!",
        suggestedVisaType: 'family_visit',
        nextAction: 'start_form',
        confidence: 0.88
      }
    }
    
    return {
      response: "Hi! I'm AVA, your AI visa assistant. I can help you with tourist, business, student, work, or family visit visas. What type of travel are you planning? üõÇ‚úàÔ∏è",
      nextAction: 'continue_chat',
      confidence: 0.5
    }
  },

  // Get dynamic form questions
  async getFormQuestions(visaType: VisaType, currentAnswers: Record<string, any> = {}): Promise<Question[]> {
    await new Promise(resolve => setTimeout(resolve, 500))
    
    const baseQuestions: Record<VisaType, Question[]> = {
      tourist: [
        {
          id: 'destination_country',
          text: 'Which country are you planning to visit?',
          type: 'select',
          options: ['Germany', 'France', 'Spain', 'Italy', 'Netherlands', 'Other'],
          required: true
        },
        {
          id: 'travel_purpose',
          text: 'What is the main purpose of your visit?',
          type: 'select',
          options: ['Sightseeing', 'Visiting friends/family', 'Cultural events', 'Medical treatment'],
          required: true
        },
        {
          id: 'duration',
          text: 'How many days do you plan to stay?',
          type: 'number',
          required: true,
          validation: { min: 1, max: 90, message: 'Tourist stays are typically 1-90 days' }
        },
        {
          id: 'accommodation',
          text: 'Where will you be staying?',
          type: 'select',
          options: ['Hotel', 'Airbnb', 'With friends/family', 'Hostel', 'Other'],
          required: true
        }
      ],
      business: [
        {
          id: 'destination_country',
          text: 'Which country is your business visit to?',
          type: 'select',
          options: ['Germany', 'France', 'Spain', 'Italy', 'Netherlands', 'Other'],
          required: true
        },
        {
          id: 'business_purpose',
          text: 'What type of business activities?',
          type: 'select',
          options: ['Conference/Meeting', 'Training', 'Negotiations', 'Site visit', 'Trade fair'],
          required: true
        },
        {
          id: 'company_name',
          text: 'What is your company name?',
          type: 'text',
          required: true
        },
        {
          id: 'invitation_company',
          text: 'Name of the inviting company/organization',
          type: 'text',
          required: true
        },
        {
          id: 'duration',
          text: 'Duration of business visit (days)?',
          type: 'number',
          required: true,
          validation: { min: 1, max: 30, message: 'Business visits are typically 1-30 days' }
        }
      ],
      student: [
        {
          id: 'destination_country',
          text: 'Which country will you study in?',
          type: 'select',
          options: ['Germany', 'France', 'Spain', 'Italy', 'Netherlands', 'Other'],
          required: true
        },
        {
          id: 'institution_name',
          text: 'Name of educational institution',
          type: 'text',
          required: true
        },
        {
          id: 'study_level',
          text: 'Level of study',
          type: 'select',
          options: ['Bachelor\'s degree', 'Master\'s degree', 'PhD', 'Exchange program', 'Language course'],
          required: true
        },
        {
          id: 'study_duration',
          text: 'Duration of studies (months)',
          type: 'number',
          required: true,
          validation: { min: 1, max: 60, message: 'Study duration typically 1-60 months' }
        }
      ],
      work: [
        {
          id: 'destination_country',
          text: 'Which country will you work in?',
          type: 'select',
          options: ['Germany', 'France', 'Spain', 'Italy', 'Netherlands', 'Other'],
          required: true
        },
        {
          id: 'job_title',
          text: 'Job title/position',
          type: 'text',
          required: true
        },
        {
          id: 'employer_name',
          text: 'Employer company name',
          type: 'text',
          required: true
        },
        {
          id: 'contract_duration',
          text: 'Contract duration (months)',
          type: 'number',
          required: true,
          validation: { min: 1, max: 60, message: 'Work contracts typically 1-60 months' }
        }
      ],
      family_visit: [
        {
          id: 'destination_country',
          text: 'Which country are you visiting?',
          type: 'select',
          options: ['Germany', 'France', 'Spain', 'Italy', 'Netherlands', 'Other'],
          required: true
        },
        {
          id: 'relationship',
          text: 'Relationship to person you\'re visiting',
          type: 'select',
          options: ['Spouse', 'Parent', 'Child', 'Sibling', 'Grandparent', 'Other family'],
          required: true
        },
        {
          id: 'host_name',
          text: 'Name of person you\'re visiting',
          type: 'text',
          required: true
        },
        {
          id: 'visit_duration',
          text: 'Duration of visit (days)',
          type: 'number',
          required: true,
          validation: { min: 1, max: 180, message: 'Family visits typically 1-180 days' }
        }
      ],
      transit: [
        {
          id: 'transit_country',
          text: 'Which country are you transiting through?',
          type: 'select',
          options: ['Germany', 'France', 'Spain', 'Italy', 'Netherlands', 'Other'],
          required: true
        },
        {
          id: 'final_destination',
          text: 'What is your final destination?',
          type: 'text',
          required: true
        },
        {
          id: 'transit_duration',
          text: 'How long is your layover (hours)?',
          type: 'number',
          required: true,
          validation: { min: 1, max: 24, message: 'Transit typically 1-24 hours' }
        }
      ]
    }
    
    return baseQuestions[visaType] || []
  },

  // Submit application
  async submitApplication(application: Partial<VisaApplication>): Promise<VisaApplication> {
    await new Promise(resolve => setTimeout(resolve, 1500))
    
    const now = new Date()
    const estimatedDecision = new Date(now.getTime() + (10 * 24 * 60 * 60 * 1000)) // 10 days from now
    
    return {
      id: `app_${Date.now()}`,
      userId: 'user_123',
      visaType: application.visaType!,
      status: 'submitted',
      answers: application.answers || {},
      documents: application.documents || [],
      createdAt: now,
      updatedAt: now,
      submittedAt: now,
      estimatedDecision,
      approvalProbability: Math.floor(Math.random() * 30) + 70 // 70-100%
    }
  },

  // Get application status
  async getApplicationStatus(applicationId: string): Promise<VisaApplication> {
    await new Promise(resolve => setTimeout(resolve, 800))
    
    // Mock status progression
    const statuses: any[] = ['submitted', 'document_review', 'background_check', 'officer_review']
    const currentStatusIndex = Math.floor(Math.random() * statuses.length)
    
    return {
      id: applicationId,
      userId: 'user_123',
      visaType: 'tourist',
      status: statuses[currentStatusIndex],
      answers: {},
      documents: [],
      createdAt: new Date(),
      updatedAt: new Date(),
      approvalProbability: Math.floor(Math.random() * 30) + 70
    }
  }
}
</file>

<file path="utils/helpers.ts">
// src/utils/helpers.ts

import { clsx, type ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'
import { ApplicationStatus, VisaType } from '@/types'

/**
 * Utility function to merge Tailwind classes
 */
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

/**
 * Format file size in human readable format
 */
export function formatFileSize(bytes: number): string {
  if (bytes === 0) return '0 Bytes'
  
  const k = 1024
  const sizes = ['Bytes', 'KB', 'MB', 'GB']
  const i = Math.floor(Math.log(bytes) / Math.log(k))
  
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]
}

/**
 * Format date to locale string with options
 */
export function formatDate(date: Date | string, options?: Intl.DateTimeFormatOptions): string {
  const dateObj = typeof date === 'string' ? new Date(date) : date
  
  const defaultOptions: Intl.DateTimeFormatOptions = {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    ...options
  }
  
  return dateObj.toLocaleDateString('en-US', defaultOptions)
}

/**
 * Format date with time
 */
export function formatDateTime(date: Date | string): string {
  const dateObj = typeof date === 'string' ? new Date(date) : date
  
  return dateObj.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })
}

/**
 * Calculate days between two dates
 */
export function daysBetween(date1: Date, date2: Date): number {
  const diffTime = Math.abs(date2.getTime() - date1.getTime())
  return Math.ceil(diffTime / (1000 * 60 * 60 * 24))
}

/**
 * Get status color for application status
 */
export function getStatusColor(status: ApplicationStatus): string {
  switch (status) {
    case 'approved':
      return 'text-green-600'
    case 'rejected':
      return 'text-red-600'
    case 'requires_interview':
      return 'text-yellow-600'
    case 'submitted':
      return 'text-blue-600'
    case 'document_review':
    case 'background_check':
    case 'officer_review':
      return 'text-purple-600'
    default:
      return 'text-gray-600'
  }
}

/**
 * Get status background color
 */
export function getStatusBgColor(status: ApplicationStatus): string {
  switch (status) {
    case 'approved':
      return 'bg-green-50 border-green-200'
    case 'rejected':
      return 'bg-red-50 border-red-200'
    case 'requires_interview':
      return 'bg-yellow-50 border-yellow-200'
    case 'submitted':
      return 'bg-blue-50 border-blue-200'
    case 'document_review':
    case 'background_check':
    case 'officer_review':
      return 'bg-purple-50 border-purple-200'
    default:
      return 'bg-gray-50 border-gray-200'
  }
}

/**
 * Get human-readable visa type name
 */
export function getVisaTypeName(visaType: VisaType): string {
  const names = {
    tourist: 'Tourist Visa',
    business: 'Business Visa',
    student: 'Student Visa',
    work: 'Work Visa',
    family_visit: 'Family Visit Visa',
    transit: 'Transit Visa'
  }
  return names[visaType] || 'Visa'
}

/**
 * Get human-readable status name
 */
export function getStatusName(status: ApplicationStatus): string {
  const names = {
    draft: 'Draft',
    submitted: 'Submitted',
    document_review: 'Document Review',
    background_check: 'Background Check',
    officer_review: 'Officer Review',
    approved: 'Approved',
    rejected: 'Rejected',
    requires_interview: 'Interview Required'
  }
  return names[status] || status
}

/**
 * Validate email format
 */
export function isValidEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  return emailRegex.test(email)
}

/**
 * Validate phone number (simple validation)
 */
export function isValidPhone(phone: string): boolean {
  const phoneRegex = /^\+?[\d\s-()]+$/
  return phoneRegex.test(phone) && phone.replace(/\D/g, '').length >= 10
}

/**
 * Generate a random application ID
 */
export function generateApplicationId(): string {
  const prefix = 'VSV'
  const timestamp = Date.now().toString().slice(-6)
  const random = Math.random().toString(36).substring(2, 6).toUpperCase()
  return `${prefix}-${timestamp}-${random}`
}

/**
 * Sleep utility for demos/delays
 */
export function sleep(ms: number): Promise<void> {
  return new Promise(resolve => setTimeout(resolve, ms))
}

/**
 * Debounce function for search/input
 */
export function debounce<T extends (...args: any[]) => any>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout
  
  return function executedFunction(...args: Parameters<T>) {
    const later = () => {
      clearTimeout(timeout)
      func(...args)
    }
    
    clearTimeout(timeout)
    timeout = setTimeout(later, wait)
  }
}

/**
 * Throttle function for scroll/resize events
 */
export function throttle<T extends (...args: any[]) => any>(
  func: T,
  limit: number
): (...args: Parameters<T>) => void {
  let inThrottle: boolean
  
  return function executedFunction(...args: Parameters<T>) {
    if (!inThrottle) {
      func.apply(this, args)
      inThrottle = true
      setTimeout(() => inThrottle = false, limit)
    }
  }
}

/**
 * Copy text to clipboard
 */
export async function copyToClipboard(text: string): Promise<boolean> {
  try {
    await navigator.clipboard.writeText(text)
    return true
  } catch (err) {
    // Fallback for older browsers
    const textArea = document.createElement('textarea')
    textArea.value = text
    document.body.appendChild(textArea)
    textArea.focus()
    textArea.select()
    
    try {
      document.execCommand('copy')
      document.body.removeChild(textArea)
      return true
    } catch (error) {
      document.body.removeChild(textArea)
      return false
    }
  }
}

/**
 * Check if device is mobile
 */
export function isMobile(): boolean {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
    navigator.userAgent
  )
}

/**
 * Get browser info
 */
export function getBrowserInfo() {
  const userAgent = navigator.userAgent
  
  if (userAgent.includes('Firefox')) return 'Firefox'
  if (userAgent.includes('Chrome')) return 'Chrome'
  if (userAgent.includes('Safari')) return 'Safari'
  if (userAgent.includes('Edge')) return 'Edge'
  
  return 'Unknown'
}

/**
 * Local storage helpers with error handling
 */
export const storage = {
  get: (key: string) => {
    try {
      const item = localStorage.getItem(key)
      return item ? JSON.parse(item) : null
    } catch (error) {
      console.error('Error reading from localStorage:', error)
      return null
    }
  },
  
  set: (key: string, value: any) => {
    try {
      localStorage.setItem(key, JSON.stringify(value))
      return true
    } catch (error) {
      console.error('Error writing to localStorage:', error)
      return false
    }
  },
  
  remove: (key: string) => {
    try {
      localStorage.removeItem(key)
      return true
    } catch (error) {
      console.error('Error removing from localStorage:', error)
      return false
    }
  },
  
  clear: () => {
    try {
      localStorage.clear()
      return true
    } catch (error) {
      console.error('Error clearing localStorage:', error)
      return false
    }
  }
}
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="eslint.config.mjs">
import { dirname } from "path";
import { fileURLToPath } from "url";
import { FlatCompat } from "@eslint/eslintrc";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

const eslintConfig = [
  ...compat.extends("next/core-web-vitals", "next/typescript"),
];

export default eslintConfig;
</file>

<file path="next.config.ts">
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    domains: ['localhost', 'via.placeholder.com'],
    formats: ['image/webp', 'image/avif'],
  },
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'Referrer-Policy',
            value: 'strict-origin-when-cross-origin',
          },
        ],
      },
    ]
  },
  env: {
    CUSTOM_KEY: 'visaverge-demo',
  },
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
  typescript: {
    // Dangerously allow production builds to successfully complete even if
    // your project has type errors.
    ignoreBuildErrors: false,
  },
  eslint: {
    // Warning: This allows production builds to successfully complete even if
    // your project has ESLint errors.
    ignoreDuringBuilds: false,
  },
}

module.exports = nextConfig
</file>

<file path="package.json">
{
  "name": "visaverge-user",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@tailwindcss/forms": "^0.5.10",
    "@tailwindcss/typography": "^0.5.16",
    "clsx": "^2.1.1",
    "daisyui": "^4.12.14",
    "lucide-react": "^0.522.0",
    "next": "15.3.4",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "tailwind-merge": "^3.3.1",
    "zustand": "^5.0.5"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^3",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "autoprefixer": "^10.4.21",
    "eslint": "^9",
    "eslint-config-next": "15.3.4",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.17",
    "typescript": "^5"
  }
}
</file>

<file path="postcss.config.mjs">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './lib/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        mono: ['JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', 'monospace'],
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem',
      },
      borderRadius: {
        '4xl': '2rem',
        '5xl': '2.5rem',
      },
      boxShadow: {
        'soft': '0 2px 15px rgba(0, 0, 0, 0.08)',
        'medium': '0 4px 25px rgba(0, 0, 0, 0.1)',
        'strong': '0 8px 40px rgba(0, 0, 0, 0.12)',
        'colored': '0 8px 30px rgba(59, 130, 246, 0.15)',
        'colored-lg': '0 12px 50px rgba(59, 130, 246, 0.2)',
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.5s ease-out',
        'visa-pulse': 'visaPulse 2s infinite',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { 
            opacity: '0',
            transform: 'translateY(20px)'
          },
          '100%': { 
            opacity: '1',
            transform: 'translateY(0)'
          },
        },
        visaPulse: {
          '0%, 100%': { opacity: '1' },
          '50%': { opacity: '0.7' },
        },
      },
    },
    container: {
      center: true,
      padding: {
        DEFAULT: "1rem",
        sm: "1rem",
        lg: "4rem",
        xl: "8rem",
        "2xl": "12rem"
      }
    }
  },
  plugins: [
    require("daisyui")
  ],
  daisyui: {
    themes: ["cupcake", "dracula"],
    darkTheme: "dracula",
    base: true,
    styled: true,
    utils: true,
    prefix: "",
    logs: true,
    themeRoot: ":root",
  }
}
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
</file>

</files>
